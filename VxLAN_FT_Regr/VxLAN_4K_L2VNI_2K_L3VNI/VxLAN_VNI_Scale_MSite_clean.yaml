# ------------------------------------------------------
# Define Cleaner modules, device groups / devices
# ------------------------------------------------------

cleaners:
    PyatsDeviceClean:
        module: genie.libs.clean
        groups: [spine_device_grp, vtep_device_grp]
        devices: [node3_s2_bgw_1, node4_s2_bgw_2, node9_s3_leaf_1]

# ------------------------------------------------------
# Define clean part for Device groups
# ------------------------------------------------------

groups:
    
    spine_device_grp:
        devices:
            - node1_cs_dci
            - node2_s2_spine
            - node6_s3_spine
        connect:
        apply_configuration:
            configuration: |
                ! -- Enable Logging
                logg cons 5
                term mon
                
                ! -- Default Features
                feature telnet
                feature bash
                feature nxapi
                
                ! -- NTP Configs
                ntp server 10.105.222.158 use-vrf management
                clock format 12-hours
                
                ! -- Management VRF NTP Configs
                vrf context management
                    ip domain-name cisco
                    ip name-server 72.163.128.140
                ip domain-lookup
                
                ! -- Smart License configs
                test license smart dev-cert disable
                ip host cslu-local 10.197.137.91

                ! -- SNMP base configs
                snmp-server community public rw 
        order:
        - connect
        - apply_configuration
    
    vtep_device_grp:
        devices:
            - node5_s2_leaf_1
            - node7_s3_bgw_1
            - node8_s3_bgw_2
        connect:
        apply_configuration:
            configuration: |
                ! -- Enable Logging
                logg cons 5
                term mon
                
                ! -- Default Features
                feature telnet
                feature bash
                feature nxapi
                
                ! -- NTP Configs
                ntp server 10.105.222.158 use-vrf management
                clock format 12-hours
                
                ! -- Management VRF NTP Configs
                vrf context management
                    ip domain-name cisco
                    ip name-server 72.163.128.140
                ip domain-lookup
                
                ! -- Smart License configs
                test license smart dev-cert disable
                ip host cslu-local 10.197.137.91
                
                ! -- SNMP base configs
                snmp-server community public rw 

                ! -- Logging 2.0 configs
                bloggerd log-dump all
                bloggerd log-throttle
                no bloggerd log-transfer
        order:
        - connect
        - apply_configuration

# ------------------------------------------------------
# Define clean part for devices
# ------------------------------------------------------

devices:
    node3_s2_bgw_1:
        connect:
        apply_configuration:
            configuration: |
                ! -- Enable Logging
                logg cons 5
                term mon
                
                ! -- Default Features
                feature telnet
                feature bash
                feature nxapi
                
                ! -- NTP Configs
                ntp server 10.105.222.158 use-vrf management
                clock format 12-hours
                
                ! -- Management VRF NTP Configs
                vrf context management
                    ip domain-name cisco
                    ip name-server 72.163.128.140
                ip domain-lookup
                
                ! -- Smart License configs
                test license smart dev-cert disable
                ip host cslu-local 10.197.137.91

                ! -- SNMP base configs
                snmp-server community public rw 

                ! -- Breakout Configs
                interface breakout module 1 port 49 map 10g-4x
        order:
        - connect
        - apply_configuration
    
    node4_s2_bgw_2:
        connect:
        apply_configuration:
            configuration: |
                ! -- Enable Logging
                logg cons 5
                term mon
                
                ! -- Default Features
                feature telnet
                feature bash
                feature nxapi
                
                ! -- NTP Configs
                ntp server 10.105.222.158 use-vrf management
                clock format 12-hours
                
                ! -- Management VRF NTP Configs
                vrf context management
                    ip domain-name cisco
                    ip name-server 72.163.128.140
                ip domain-lookup
                
                ! -- Smart License configs
                test license smart dev-cert disable
                ip host cslu-local 10.197.137.91

                ! -- SNMP base configs
                snmp-server community public rw 

                ! -- Breakout Configs
                interface breakout module 1 port 49 map 10g-4x
        order:
        - connect
        - apply_configuration

    node9_s3_leaf_1:
        connect:
        apply_configuration:
            configuration: |
                ! -- Enable Logging
                logg cons 5
                term mon
                
                ! -- Default Features
                feature telnet
                feature bash
                feature nxapi
                
                ! -- NTP Configs
                ntp server 10.105.222.158 use-vrf management
                clock format 12-hours
                
                ! -- Management VRF NTP Configs
                vrf context management
                    ip domain-name cisco
                    ip name-server 72.163.128.140
                ip domain-lookup
                
                ! -- Smart License configs
                test license smart dev-cert disable
                ip host cslu-local 10.197.137.91

                ! -- SNMP base configs
                snmp-server community public rw 

                ! -- Breakout Configs
                interface breakout module 1 port 1,63 map 10g-4x
        order:
        - connect
        - apply_configuration
