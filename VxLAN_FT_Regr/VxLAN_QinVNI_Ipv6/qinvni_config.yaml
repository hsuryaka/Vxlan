#-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-
#    Node List:                                                    #
#            node01_spine        : SPINE                           #
#            node02_vpcVtep1     : VTEP-1                          #
#            node03_vpcVtep2     : VTEP-2                          #
#            node04_stdVtep3     : VTEP-3                          #
#            node05_vpcFANOUT    : FANOUT                          #
#-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-

parameters:
    context: cli

    #-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-
    #   Features to be enabled on each device with specified by alias  #
    #-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-

    enable_features:
        
        # SPINE-Device
        node01_spine:
            - lldp
            - lacp
            - ospfv3
            - bgp
            - vxlan
            - pim4
            - pim6
            - bfd
        
        # VPC-VTEP-1
        node02_vpcVtep1:
            - lldp
            - lacp
            - ospfv3
            - bgp
            - vxlan
            - pim4
            - pim6
            - vlan
            - bfd
          
        # VPC-VTEP-2
        node03_vpcVtep2:
            - lldp
            - lacp
            - ospfv3
            - bgp
            - vxlan
            - pim4
            - pim6
            - vlan
            - bfd
        
        # STANDLONE-VTEP-3
        node04_stdVtep3:
            - lldp
            - lacp
            - ospfv3
            - bgp
            - vxlan
            - pim4
            - pim6
            - vlan
            - bfd
            
        # FANOUT-Device
        node05_vpcFANOUT:
            - lldp
            - lacp        
    
    #-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-
    #                 Interface Level configs                          #
    #-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-

    interface_config: 

        # SPINE-Device --------------------------
        node01_spine:
            loopback0:
                description: "### RID | Loopback ###"
                enabled: True
                ipv4:
                    ip: 11.11.11.11
                    prefix_length: 255.255.255.255
                ipv6:
                    ip: 4001:1::5
                    prefix_length: 128            
            # SPINE towards VTEP-1 as Link-1 to Link-4
            nd01_nd02_1_1:
                enabled: True
            nd01_nd02_1_2:
                enabled: True
            nd01_nd02_1_3:
                enabled: True
            nd01_nd02_1_4:
                enabled: True            
            Port-channel211:
                channel_group_mode: active
                enabled: True
                switchport_enable: False
                add_members: nd01_nd02_1_1, nd01_nd02_1_2, nd01_nd02_1_3, nd01_nd02_1_4 
                ipv6:
                    ip: 2001:2:211:1::2
                    prefix_length: 64             
            # SPINE towards VTEP-2 as Link-1 to Link-4
            nd01_nd03_1_1:
                enabled: True
            nd01_nd03_1_2:
                enabled: True
            nd01_nd03_1_3:
                enabled: True
            nd01_nd03_1_4:
                enabled: True
            Port-channel212:
                channel_group_mode: active
                enabled: True
                switchport_enable: False
                add_members: nd01_nd03_1_1, nd01_nd03_1_2, nd01_nd03_1_3, nd01_nd03_1_4
                ipv6:
                    ip: 2001:2:212:1::2
                    prefix_length: 64               
            # SPINE towards VTEP-3 as Link-1 to Link-4
            nd01_nd04_1_1:
                enabled: True
            nd01_nd04_1_2:
                enabled: True
            nd01_nd04_1_3:
                enabled: True
            nd01_nd04_1_4:
                enabled: True
            Port-channel213:
                channel_group_mode: active
                enabled: True
                switchport_enable: False
                add_members: nd01_nd04_1_1, nd01_nd04_1_2, nd01_nd04_1_3, nd01_nd04_1_4
                ipv6:
                    ip: 2001:2:213:1::2
                    prefix_length: 64                 

        # VTEP-1 Device --------------------------
        node02_vpcVtep1:
            ### Loopback Interfaces
            loopback0:
                description: "### RID | Loopback ###"
                enabled: True
                ipv4:
                    ip: 20.1.1.1
                    prefix_length: 255.255.255.0
                ipv6:
                    ip: 2001:211:1::1
                    prefix_length: 128
            loopback1:
                description: "### VTEP-1 | loopback interface ###"
                enabled: True
                ipv6:
                    ip: 3001:1:1::1
                    prefix_length: 128
            loopback2:
                description: "### VTEP-1 | Secondary loopback interface for v6 ###"
                enabled: True
                ipv6:
                    ip: 2001:1:1::1
                    prefix_length: 128

            # VTEP-1 towards SPINE as Link-1 to Link-4
            nd02_nd01_1_1:
                enabled: True
            nd02_nd01_1_2:
                enabled: True
            nd02_nd01_1_3:
                enabled: True
            nd02_nd01_1_4:
                enabled: True
            Port-channel211:
                channel_group_mode: active
                enabled: True
                switchport_enable: False
                add_members: nd02_nd01_1_1, nd02_nd01_1_2, nd02_nd01_1_3, nd02_nd01_1_4
                ipv6:
                    ip: 2001:2:211:1::3
                    prefix_length: 64       

            # VPC Peer-keep-alive
            nd02_nd03_1_1:
                enabled: True
                vrf : "peer-keep-alive"
                description: "### VTEP-1 VPC Peer-keep-alive ###"
                switchport_enable: False
                ipv4:
                    ip: 5.5.5.5
                    prefix_length: 255.255.255.0
                ipv6:
                    ip: 5001:1::1
                    prefix_length: 128

            # VPC Peer-Link
            nd02_nd03_1_2:
                enabled: True
            nd02_nd03_1_3:
                enabled: True
            nd02_nd03_1_4:
                enabled: True
            Port-channel100:
                channel_group_mode: active
                enabled: True
                switchport_enable: True
                spanning-tree port type: network
                switchport_mode: trunk
                #trunk_vlans: "2,301-302"
                add_members: nd02_nd03_1_2, nd02_nd03_1_3, nd02_nd03_1_4

            # VPC LEG
            nd02_nd05_1_1:
                enabled: True
            nd02_nd05_1_2:
                enabled: True
            nd02_nd05_1_3:
                enabled: True
            nd02_nd05_1_4:
                enabled: True                    
            Port-channel200:
                channel_group_mode: active
                enabled: True
                switchport_enable: True
                switchport_mode: access
                access_vlans: "301"
                add_members: nd02_nd05_1_1, nd02_nd05_1_2, nd02_nd05_1_3, nd02_nd05_1_4

            # IXIA TGEN
            nd02_tgen_1_1:
                enabled: True
                switchport_enable: True
                switchport_mode: access
                access_vlans: "301"
                

            # Backup SVI for VPC
            Vlan2:
                enabled: True
                description: "### Backup SVI ###"
                ipv4:
                    redirect: False
                ipv6:
                    ip: 2:2:2::1
                    prefix_length: 64
                    redirect: False

            # L2VNI SVI Configs
            Vlan301-302:
                description: "L2VNI"
                fabric_forwarding_mode: anycast-gateway
                enabled: True
                vrf:
                    start: 900001
                    step: 000001
                    prefix: 'VRF-vxlan'
                ipv4:
                    start_ipv4_addr: 2.1.1.1
                    start_ipv4_prefix_len: 255.255.255.0
                    step_ipv4_addr: 0.0.1.0
                    step_ipv4_len: 0.0.0.0
                    redirect: False
                ipv6:
                    start_ipv6_addr: 2001:2:1:1::1
                    start_ipv6_prefix_len: 64
                    step_ipv6_addr: 0:0:1:0::0
                    step_ipv6_prefix_len: 0
                    redirect: False

            # L3VNI SVI Configs
            Vlan10:
                description: "L3VNI"
                enabled: True
                ip_forward: True
                ipv6_forward: True
                vrf:
                    start: 900001
                    step: 000001
                    prefix: 'VRF-vxlan'
                ipv4:
                    redirect: False
                ipv6:
                    redirect: False

            # NVE Configs
            nve1:
                description: 'NVE Interface'
                nve_host_reachability_protocol: bgp
                nve_src_intf_loopback: loopback1
                nve_src_intf_holddown: 240
                nve_global_ir_proto: bgp
                nve_global_suppress_arp: True
                nve_adv_virtual_rmac: True
                enabled: True
                nve_vni_dict:
                    # L2VNI Set-1
                    2001001-2001002:
                        nve_vni_type: 'L2'
                        nve_vni_suppress_arp: True
                        nve_vni_ir: true
                        nve_vni_ir_proto: bgp
                    # L3VNI
                    900001:
                        nve_vni_type: 'L3'
                        nve_vni_associate_vrf: True
                    900002:
                        nve_vni_type: 'L3'
                        nve_vni_associate_vrf: True

        # VPC VTEP-2 --------------------------
        node03_vpcVtep2:
            ### Loopback Interfaces
            loopback0:
                description: "### RID | Loopback ###"
                enabled: True
                ipv4:
                    ip: 2.212.1.1
                    prefix_length: 255.255.255.255
                ipv6:
                    ip: 2001:212:1::1
                    prefix_length: 128  
            loopback1:
                description: "### VTEP-2 | loopback interface ###"
                enabled: True
                ipv6:
                    ip: 3001:1:1::2
                    prefix_length: 128
            loopback2:
                description: "### VTEP-2 | Secondary loopback interface ###"
                enabled: True
                ipv6:
                    ip: 2001:1:1::1
                    prefix_length: 128                    

            # VTEP-2 towards SPINE as Link-1 to Link-4
            nd03_nd01_1_1:
                enabled: True
            nd03_nd01_1_2:
                enabled: True
            nd03_nd01_1_3:
                enabled: True
            nd03_nd01_1_4:
                enabled: True            
            Port-channel212:
                channel_group_mode: active
                enabled: True
                switchport_enable: False
                add_members: nd03_nd01_1_1, nd03_nd01_1_2, nd03_nd01_1_3, nd03_nd01_1_4
                ipv6:
                    ip: 2001:2:212:1::3
                    prefix_length: 64   
            # VPC Peer-keep-alive
            nd03_nd02_1_1:
                enabled: True
                vrf : "peer-keep-alive"
                description: "### VPC Peer-keep-alive ###"
                switchport_enable: False
                ipv4:
                    ip: 5.5.5.10
                    prefix_length: 255.255.255.0
                ipv6:
                    ip: 3001:1::2
                    prefix_length: 128

            # VPC Peer-Link
            nd03_nd02_1_2:
                enabled: True
            nd03_nd02_1_3:
                enabled: True
            nd03_nd02_1_4:
                enabled: True
            Port-channel100:
                channel_group_mode: active
                enabled: True
                switchport_enable: True
                switchport_mode: trunk
                #trunk_vlans: "2,301-302"
                add_members: nd03_nd02_1_2, nd03_nd02_1_3, nd03_nd02_1_4

            # VPC LEG towards FANOUT
            nd03_nd05_1_1:
                enabled: True
            nd03_nd05_1_2:
                enabled: True
            nd03_nd05_1_3:
                enabled: True
            nd03_nd05_1_4:
                enabled: True                        
            Port-channel200:
                channel_group_mode: active
                enabled: True
                switchport_enable: True
                switchport_mode: access
                access_vlans: "301"
                add_members: nd03_nd05_1_1, nd03_nd05_1_2, nd03_nd05_1_3, nd03_nd05_1_4

            # IXIA TGEN as link-1
            nd03_tgen_1_1:
                enabled: True
                switchport_enable: True
                switchport_mode: access
                access_vlans: "301"

            # # IXIA TGEN as link-2
            # nd03_tgen_1_2:
            #     enabled: True
            #     switchport_enable: True
            #     switchport_mode: trunk
            #     access_vlans: "2,1001-1010"                

            # Backup SVI for VP
            Vlan2:
                enabled: True
                description: "### Backup SVI ###"
                ipv6:
                    ip: 2:2:2::2
                    prefix_length: 64
            
            # L2VNI SVI Configs - Set-1
            Vlan301-302:
                description: "L2VNI"
                fabric_forwarding_mode: anycast-gateway
                enabled: True
                vrf:
                    start: 900001
                    step: 000001
                    prefix: 'VRF-vxlan'
                ipv4:
                    start_ipv4_addr: 2.1.1.1
                    start_ipv4_prefix_len: 255.255.255.0
                    step_ipv4_addr: 0.0.1.0
                    step_ipv4_len: 0.0.0.0
                    redirect: False
                ipv6:
                    start_ipv6_addr: 2001:2:1:1::1
                    start_ipv6_prefix_len: 64
                    step_ipv6_addr: 0:0:1:0::0
                    step_ipv6_prefix_len: 0
                    redirect: False

            # L3VNI SVI Configs
            Vlan10:
                description: "L3VNI"
                enabled: True
                ip_forward: True
                ipv6_forward: True
                vrf:
                    start: 900001
                    step: 000001
                    prefix: 'VRF-vxlan'
                ipv4:
                    redirect: False
                ipv6:
                    redirect: False

            # NVE Configs
            nve1:
                description: 'NVE Interface'
                nve_host_reachability_protocol: bgp
                nve_src_intf_loopback: loopback1
                nve_src_intf_holddown: 240
                nve_global_ir_proto: bgp
                nve_adv_virtual_rmac: True
                nve_global_suppress_arp: True
                enabled: True
                nve_vni_dict:
                    # L2VNI Set-1
                    2001001-2001002:
                        nve_vni_type: 'L2'
                        nve_vni_suppress_arp: True
                        nve_vni_ir: true
                        nve_vni_ir_proto: bgp
                    # L3VNI
                    900001:
                        nve_vni_type: 'L3'
                        nve_vni_associate_vrf: True
                    900002:
                        nve_vni_type: 'L3'
                        nve_vni_associate_vrf: True

        # STANDLONE VTEP --------------------------
        node04_stdVtep3:
            ### Loopback Interfaces
            loopback0:
                description: "### RID | Loopback ###"
                enabled: True
                ipv4:
                    ip: 2.213.1.1
                    prefix_length: 255.255.255.0
                ipv6:
                    ip: 2001:213:1::1
                    prefix_length: 64  
            loopback1:
                description: "### VTEP-3 loopback interface ###"
                enabled: True
                ipv6:
                    ip: 3001:1:1::3
                    prefix_length: 128  

            # VTEP-3 towards SPINE as Link-1 to Link-4
            nd04_nd01_1_1:
                enabled: True
            nd04_nd01_1_2:
                enabled: True
            nd04_nd01_1_3:
                enabled: True
            nd04_nd01_1_4:
                enabled: True
            Port-channel212:
                channel_group_mode: active
                enabled: True
                switchport_enable: False
                add_members: nd04_nd01_1_1, nd04_nd01_1_1, nd04_nd01_1_3, nd04_nd01_1_4          
                ipv6:
                    ip: 2001:2:213:1::3
                    prefix_length: 128  
            # IXIA T.GEN
            nd04_tgen_1_1:
                enabled: True
                switchport_enable: True
                switchport_mode: access
                trunk_vlans: "301"

            # L2VNI SVI Configs - Set-1
            Vlan301-302:
                description: "L2VNI"
                fabric_forwarding_mode: anycast-gateway
                enabled: True
                vrf:
                    start: 900001
                    step: 000001
                    prefix: 'VRF-vxlan'
                ipv4:
                    start_ipv4_addr: 2.1.1.1
                    start_ipv4_prefix_len: 255.255.255.0
                    step_ipv4_addr: 0.0.1.0
                    step_ipv4_len: 0.0.0.0
                    redirect: False
                ipv6:
                    start_ipv6_addr: 2001:2:1:1::1
                    start_ipv6_prefix_len: 64
                    step_ipv6_addr: 0:0:1:0::0
                    step_ipv6_prefix_len: 0
                    redirect: False

            # L3VNI SVI Configs
            Vlan101-102:
                description: "L3VNI"
                enabled: True
                ip_forward: True
                ipv6_forward: True
                vrf:
                    start: 900001
                    step: 000001
                    prefix: 'VRF-vxlan'
                ipv4:
                    redirect: False
                ipv6:
                    redirect: False

            # NVE Configs
            nve1:
                description: 'NVE Interface'
                nve_host_reachability_protocol: bgp
                nve_src_intf_loopback: loopback1
                nve_src_intf_holddown: 240
                nve_global_ir_proto: bgp
                nve_global_suppress_arp: True
                enabled: True
                nve_vni_dict:
                    # L2VNI Set-1
                    2001001-2001002:
                        nve_vni_type: 'L2'
                        nve_vni_suppress_arp: True
                        nve_vni_ir: true
                        nve_vni_ir_proto: bgp
                    
                    # L3VNI
                    900001:
                        nve_vni_type: 'L3'
                        nve_vni_associate_vrf: True
                    900002:
                        nve_vni_type: 'L3'
                        nve_vni_associate_vrf: True

        # FANOUT Device
        node05_vpcFANOUT:
            
            # VPC FANOUT towards VTEP-1, VTEP-2
            nd05_nd02_1_1:
                enabled: True
            nd05_nd02_1_2:
                enabled: True
            nd05_nd02_1_3:
                enabled: True
            nd05_nd02_1_4:
                enabled: True                    
            nd05_nd03_1_1:
                enabled: True
            nd05_nd03_1_2:
                enabled: True
            nd05_nd03_1_3:
                enabled: True
            nd05_nd03_1_4:
                enabled: True                    
            Port-channel200:
                channel_group_mode: active
                enabled: True
                switchport_enable: True
                switchport_mode: trunk
                trunk_vlans: "2, 1001-1002"
                add_members: nd05_nd02_1_1, nd05_nd02_1_2, nd05_nd02_1_3, nd05_nd02_1_4, nd05_nd03_1_1, nd05_nd03_1_2, nd05_nd03_1_3, nd05_nd03_1_4 

            # IXIA TGEN
            nd05_tgen_1_1:
                enabled: True
                switchport_enable: True
                switchport_mode: trunk
                trunk_vlans: "2, 301-302"
             #Note : using this Link to vpcPRIMARY Host-2

    #-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-
    # OSPF Configs                                                     #
    #-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-

    ospfv3_config:
        
        # SPINE DEVICE
        node01_spine:
            default:
                instance: vxlan
                router_id: 3.1.1.1
                log_adjacency_changes: True
                log_adjacency_changes_detail: True
                interface_config:
                    # Loopbacks
                    lo0:
                        if_admin_control: True
                        area: 0.0.0.0
                    lo1:
                        if_admin_control: True
                        area: 0.0.0.0                        
                    # To VTEP-1 as Link-1
                    Port-channel211:
                        if_admin_control: True
                        area: 0.0.0.0
                        if_cost: 1
                        if_type: 'point-to-point'                        
                    # To VTEP-2 as Link-1
                    Port-channel212:
                        if_admin_control: True
                        area: 0.0.0.0
                        if_cost: 1
                        if_type: 'point-to-point'                                  
                    # To VTEP-3 as Link-1
                    Port-channel213:
                        if_admin_control: True
                        area: 0.0.0.0
                        if_cost: 1
                        if_type: 'point-to-point'                       
                    
        # VPC VTEP-1 --------------------------
        node02_vpcVtep1:
            default:
                instance: vxlan
                router_id: 2.211.1.1
                log_adjacency_changes: True
                log_adjacency_changes_detail: True
                interface_config:
                    # Loopbacks
                    lo0:
                        if_admin_control: True
                        area: 0.0.0.0
                    lo1:
                        if_admin_control: True
                        area: 0.0.0.0
                    lo2:
                        if_admin_control: True
                        area: 0.0.0.0                        
                    # TO SPINE as Link-1
                    Port-channel211:
                        if_admin_control: True
                        area: 0.0.0.0
                        if_cost: 1
                        if_type: 'point-to-point'
                    # Back up Link
                    vlan2:
                        if_admin_control: True
                        area: 0.0.0.0
                        if_cost: 1
                        if_type: 'point-to-point'

        # VPC VTEP-2 --------------------------
        node03_vpcVtep2:
            default:
                instance: vxlan
                router_id: 2.212.1.1
                log_adjacency_changes: True
                log_adjacency_changes_detail: True
                interface_config:
                    # Loopbacks
                    lo0:
                        if_admin_control: True
                        area: 0.0.0.0
                    lo1:
                        if_admin_control: True
                        area: 0.0.0.0
                    lo2:
                        if_admin_control: True
                        area: 0.0.0.0                        
                    # TO SPINE
                    Port-channel212:
                        if_admin_control: True
                        area: 0.0.0.0
                        if_cost: 1
                        if_type: 'point-to-point'
                    # Back up Link
                    vlan2:
                        if_admin_control: True
                        area: 0.0.0.0
                        if_cost: 1
                        if_type: 'point-to-point'                        

        # STANDLONE VTEP
        node04_stdVtep3:
            default:
                instance: vxlan
                router_id: 2.213.1.1
                log_adjacency_changes: True
                log_adjacency_changes_detail: True
                interface_config:
                    # Loopbacks
                    lo0:
                        if_admin_control: True
                        area: 0.0.0.0
                    lo1:
                        if_admin_control: True
                        area: 0.0.0.0
                    # TO SPINE as Link-1
                    Port-channel213:
                        if_admin_control: True
                        area: 0.0.0.0
                        if_cost: 1
                        if_type: 'point-to-point'                       

    #-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-
    # VLAN Configs                                                     #
    #-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-

    vlan_config:
        
        # VPC VTEP-1 --------------------------
        node02_vpcVtep1:
            -   vlan: "301-302"
                vn_segment_id: "2001001-2001002"
            -   vlan: "101-102"
                vn_segment_id: "900001-900002"

        # VPC VTEP-2 --------------------------
        node03_vpcVtep2:
            -   vlan: "301-302"
                vn_segment_id: "2001001-2001002"
            -   vlan: "101-102"
                vn_segment_id: "900001-900002"

        # STD VTEP-3 --------------------------
        node04_stdVtep3:
            -   vlan: "301-302"
                vn_segment_id: "2001001-2001002"
            -   vlan: "101-102"
                vn_segment_id: "900001-900002"

    #-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-
    # route-map Configs                                                #
    #-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-

    route_policy_config:

        # SPINE --------------------------
        node01_spine:       
            -   route_policy: "ANY"
                route_disposition: "permit"
                statement_name: 10
            # -   route_policy: "RMAP_NH_UNCHANGED"
            #     route_disposition: "permit"
            #     statement_name: 10
            #     set_next_hop: 'unchanged'
        
        # VPC VTEP-1 ---------------------
        node02_vpcVtep1:        
            -   route_policy: "ANY"
                route_disposition: "permit"
                statement_name: 10

        # VPC VTEP-2 ---------------------
        node03_vpcVtep2:        
            -   route_policy: "ANY"
                route_disposition: "permit"
                statement_name: 10

        # STD VTEP-3 ---------------------
        node04_stdVtep3:        
            -   route_policy: "ANY"
                route_disposition: "permit"
                statement_name: 10

    #-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-
    # VxLAN Configs                                                    #
    #-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-

    vxlan_config:
        
        # VPC VTEP-1 --------------------------
        node02_vpcVtep1:
            fabric_fwd_anycast_gw_mac: 0000.000a.aaaa

        # VPC VTEP-2 --------------------------
        node03_vpcVtep2:
            fabric_fwd_anycast_gw_mac: 0000.000a.aaaa

        # STD VTEP-3 --------------------------
        node04_stdVtep3:
            fabric_fwd_anycast_gw_mac: 0000.000a.aaaa

    #-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-
    # VxLAN EVPN Configs                                               #
    #-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-

    evpn_config:
        
        # VPC VTEP-1 --------------------------
        node02_vpcVtep1:
            vni_list:
                -   vni_id: 2001001-2001002
                    rd: auto
                    rt_list:
                        -   rt: "auto"
                            rt_type: both

        # VPC VTEP-2 --------------------------
        node03_vpcVtep2:
            vni_list:
                -   vni_id: 2001001-2001002
                    rd: auto
                    rt_list:
                        -   rt: "auto"
                            rt_type: both

        # STD VTEP-3 --------------------------
        node04_stdVtep3:
            vni_list:
                -   vni_id: 2001001-2001002
                    rd: auto
                    rt_list:
                        -   rt: "auto"
                            rt_type: both

    #-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-
    # VRF Configs                                                      #
    #-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-

    vrf_config: 

        # VPC VTEP-1 --------------------------
        node02_vpcVtep1:
            vrf_list:
                -   prefix: "VRF"
                    vrf_name: "vxlan-900001"
                    vni: "900001"
                    rd: 'auto'
                    address_family_attr:
                      - af_name: 'ipv4 unicast'
                        rt_attr: 'auto'
                        rt_type: 'both'
                        protocols:
                         - protocol: 'evpn'
                           rt_evpn: True
                      - af_name: 'ipv6 unicast'
                        rt_attr: 'auto'
                        rt_type: 'both'
                        protocols:
                         - protocol: 'evpn'
                           rt_evpn: True

                -   prefix: "VRF"
                    vrf_name: "vxlan-900002"
                    vni: "900002"
                    rd: 'auto'
                    address_family_attr:
                      - af_name: 'ipv4 unicast'
                        rt_attr: 'auto'
                        rt_type: 'both'
                        protocols:
                         - protocol: 'evpn'
                           rt_evpn: True
                      - af_name: 'ipv6 unicast'
                        rt_attr: 'auto'
                        rt_type: 'both'
                        protocols:
                         - protocol: 'evpn'
                           rt_evpn: True

        # VPC VTEP-2 --------------------------
        node03_vpcVtep2:
            vrf_list:
                -   prefix: "VRF"
                    vrf_name: "vxlan-900001"
                    vni: "900001"
                    rd: 'auto'
                    address_family_attr:
                      - af_name: 'ipv4 unicast'
                        rt_attr: 'auto'
                        rt_type: 'both'
                        protocols:
                         - protocol: 'evpn'
                           rt_evpn: True
                      - af_name: 'ipv6 unicast'
                        rt_attr: 'auto'
                        rt_type: 'both'
                        protocols:
                         - protocol: 'evpn'
                           rt_evpn: True

                -   prefix: "VRF"
                    vrf_name: "vxlan-900002"
                    vni: "900002"
                    rd: 'auto'
                    address_family_attr:
                      - af_name: 'ipv4 unicast'
                        rt_attr: 'auto'
                        rt_type: 'both'
                        protocols:
                         - protocol: 'evpn'
                           rt_evpn: True
                      - af_name: 'ipv6 unicast'
                        rt_attr: 'auto'
                        rt_type: 'both'
                        protocols:
                         - protocol: 'evpn'
                           rt_evpn: True                           

        # STD VTEP-3 --------------------------
        node04_stdVtep3:
            vrf_list:
                -   prefix: "VRF"
                    vrf_name: "vxlan-900001"
                    vni: "900001"
                    rd: 'auto'
                    address_family_attr:
                      - af_name: 'ipv4 unicast'
                        rt_attr: 'auto'
                        rt_type: 'both'
                        protocols:
                         - protocol: 'evpn'
                           rt_evpn: True
                      - af_name: 'ipv6 unicast'
                        rt_attr: 'auto'
                        rt_type: 'both'
                        protocols:
                         - protocol: 'evpn'
                           rt_evpn: True

                -   prefix: "VRF"
                    vrf_name: "vxlan-900002"
                    vni: "900002"
                    rd: 'auto'
                    address_family_attr:
                      - af_name: 'ipv4 unicast'
                        rt_attr: 'auto'
                        rt_type: 'both'
                        protocols:
                         - protocol: 'evpn'
                           rt_evpn: True
                      - af_name: 'ipv6 unicast'
                        rt_attr: 'auto'
                        rt_type: 'both'
                        protocols:
                         - protocol: 'evpn'
                           rt_evpn: True                           

    #-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-
    # PIM Configs                                                    #
    #-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-

    pim_config: {}

    #-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-
    # BGP configuration                                                #
    #-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-

    bgp_config: 

        # SPINE --------------------------
        node01_spine:
            default:
                bgp_id: 200
                router_id: 2.211.1.1
                keepalive_interval: 90
                prefix_peer_timeout: 270
                holdtime: 270
                graceful_restart_restart_time: 600
                log_neighbor_changes: True
                maxas_limit: 10
                address_family_attr:
                    -   af_name: 'l2vpn evpn'
                        af_maximum_paths_ebgp: 64
                        af_retain_rt_all: True
                    -   af_name: 'ipv4 unicast'
                        af_maximum_paths_ebgp: 64
                        af_maximum_paths_ibgp: 64
                        af_redist_connected: True
                        af_redist_connected_route_policy: 'ANY'
                    -   af_name: 'ipv6 unicast'
                        af_maximum_paths_ebgp: 64
                        af_maximum_paths_ibgp: 64
                        af_redist_connected: True
                        af_redist_connected_route_policy: 'ANY'
                neighbor_attr:
                # BGP Neighbors towards VTEPS
                    # Underlay BGP Session
                    -   neighbor_id: 2001:211:1::1
                        nbr_remote_as: 200
                        nbr_description: 'VTEP-1 Connectivity to 2001:211:1::1'
                        nbr_update_source: 'loopback0'
                        nbr_keepalive_interval: 90
                        nbr_holdtime: 270
                        address_family_attr:
                            -   nbr_af_name: 'l2vpn evpn'
                                nbr_af_send_community: 'both'
                                nbr_af_route_reflector_client: True
                    -   neighbor_id: 2001:212:1::1
                        nbr_remote_as: 200
                        nbr_description: 'VTEP-2 Connectivity to 2001:212:1::1'
                        nbr_update_source: 'loopback0'
                        nbr_keepalive_interval: 90
                        nbr_holdtime: 270
                        address_family_attr:
                            -   nbr_af_name: 'l2vpn evpn'
                                nbr_af_send_community: 'both'
                                nbr_af_route_reflector_client: True
                    -   neighbor_id: 2001:213:1::1
                        nbr_remote_as: 200
                        nbr_description: 'VTEP-3 Connectivity to 2001:213:1::1'
                        nbr_update_source: 'loopback0'
                        nbr_keepalive_interval: 90
                        nbr_holdtime: 270
                        address_family_attr:
                            -   nbr_af_name: 'l2vpn evpn'
                                nbr_af_send_community: 'both'
                                nbr_af_route_reflector_client: True

        # VPC VTEP-1 --------------------------
        node02_vpcVtep1:
            default:
                bgp_id: 200
                router_id: 2.1.1.1
                keepalive_interval: 90
                prefix_peer_timeout: 270
                holdtime: 270
                graceful_restart_restart_time: 600
                log_neighbor_changes: True
                address_family_attr:
                    -   af_name: 'l2vpn evpn'
                        af_advertise_pip: True
                        af_maximum_paths_ebgp: 64
                        af_retain_rt_all: True
                    -   af_name: 'ipv4 unicast'
                        af_maximum_paths_ebgp: 64
                        af_maximum_paths_ibgp: 64
                        af_redist_connected: True
                        af_redist_connected_route_policy: 'ANY'
                    -   af_name: 'ipv6 unicast'
                        af_maximum_paths_ebgp: 64
                        af_maximum_paths_ibgp: 64
                        af_redist_connected: True
                        af_redist_connected_route_policy: 'ANY'
                neighbor_attr:
                # BGP Neighbors towards DCI
                    # BGP Neighbors towards SPINE
                    -   neighbor_id: 4001:1::5
                        nbr_remote_as: 200
                        nbr_description: 'Towards SPINE Connectivity to 4001:1::5'
                        nbr_update_source: 'loopback0'
                        nbr_keepalive_interval: 90
                        nbr_holdtime: 270
                        address_family_attr:
                            -   nbr_af_name: 'l2vpn evpn'
                                nbr_af_send_community: 'both'
            # BGP VRF Configs
            "VRF-vxlan-900001":
                bgp_id: 200
                # prefix: ''
                address_family_attr:
                  - af_name: 'ipv4 unicast'
                    af_advertise_l2_evpn: True
                    af_maximum_paths_ebgp: 64
                    af_maximum_paths_ibgp: 64
                    af_redist_connected: True
                    af_redist_connected_route_policy: 'ANY'
                  - af_name: 'ipv6 unicast'
                    af_advertise_l2_evpn: True
                    af_maximum_paths_ebgp: 64
                    af_maximum_paths_ibgp: 64
                    af_redist_connected: True
                    af_redist_connected_route_policy: 'ANY'

            "VRF-vxlan-900002":
                bgp_id: 200
                # prefix: ''
                address_family_attr:
                  - af_name: 'ipv4 unicast'
                    af_advertise_l2_evpn: True
                    af_maximum_paths_ebgp: 64
                    af_maximum_paths_ibgp: 64
                    af_redist_connected: True
                    af_redist_connected_route_policy: 'ANY'
                  - af_name: 'ipv6 unicast'
                    af_advertise_l2_evpn: True
                    af_maximum_paths_ebgp: 64
                    af_maximum_paths_ibgp: 64
                    af_redist_connected: True
                    af_redist_connected_route_policy: 'ANY'                    

        # VPC VTEP-2 --------------------------
        node03_vpcVtep2:
            default:
                bgp_id: 200
                router_id: 2.212.1.1
                keepalive_interval: 90
                prefix_peer_timeout: 270
                holdtime: 270
                graceful_restart_restart_time: 600
                log_neighbor_changes: True
                address_family_attr:
                    -   af_name: 'l2vpn evpn'
                        af_advertise_pip: True
                        af_maximum_paths_ebgp: 64
                        af_retain_rt_all: True
                    -   af_name: 'ipv4 unicast'
                        af_maximum_paths_ebgp: 64
                        af_maximum_paths_ibgp: 64
                        af_redist_connected: True
                        af_redist_connected_route_policy: 'ANY'
                    -   af_name: 'ipv6 unicast'
                        af_maximum_paths_ebgp: 64
                        af_maximum_paths_ibgp: 64
                        af_redist_connected: True
                        af_redist_connected_route_policy: 'ANY'
                neighbor_attr:
                # BGP Neighbors towards DCI
                    # BGP Neighbors towards SPINE
                    -   neighbor_id: 4001:1::5
                        nbr_remote_as: 200
                        nbr_description: 'Towards SPINE Connectivity to 4001:1::5'
                        nbr_update_source: 'loopback0'
                        nbr_keepalive_interval: 90
                        nbr_holdtime: 270
                        address_family_attr:
                            -   nbr_af_name: 'l2vpn evpn'
                                nbr_af_send_community: 'both'
            # BGP VRF Configs
            "VRF-vxlan-900001":
                bgp_id: 200
                # prefix: ''
                address_family_attr:
                  - af_name: 'ipv4 unicast'
                    af_advertise_l2_evpn: True
                    af_maximum_paths_ebgp: 64
                    af_maximum_paths_ibgp: 64
                    af_redist_connected: True
                    af_redist_connected_route_policy: 'ANY'
                  - af_name: 'ipv6 unicast'
                    af_advertise_l2_evpn: True
                    af_maximum_paths_ebgp: 64
                    af_maximum_paths_ibgp: 64
                    af_redist_connected: True
                    af_redist_connected_route_policy: 'ANY'

            "VRF-vxlan-900002":
                bgp_id: 200
                # prefix: ''
                address_family_attr:
                  - af_name: 'ipv4 unicast'
                    af_advertise_l2_evpn: True
                    af_maximum_paths_ebgp: 64
                    af_maximum_paths_ibgp: 64
                    af_redist_connected: True
                    af_redist_connected_route_policy: 'ANY'
                  - af_name: 'ipv6 unicast'
                    af_advertise_l2_evpn: True
                    af_maximum_paths_ebgp: 64
                    af_maximum_paths_ibgp: 64
                    af_redist_connected: True
                    af_redist_connected_route_policy: 'ANY'                    

        # STANDLONE VTEP --------------------------
        node04_stdVtep3:
            default:
                bgp_id: 200
                router_id: 2.213.1.1
                keepalive_interval: 90
                prefix_peer_timeout: 270
                holdtime: 270
                graceful_restart_restart_time: 600
                log_neighbor_changes: True
                address_family_attr:
                    -   af_name: 'l2vpn evpn'
                        af_maximum_paths_ebgp: 64
                        af_retain_rt_all: True
                    -   af_name: 'ipv4 unicast'
                        af_maximum_paths_ebgp: 64
                        af_maximum_paths_ibgp: 64
                        af_redist_connected: True
                        af_redist_connected_route_policy: 'ANY'
                    -   af_name: 'ipv6 unicast'
                        af_maximum_paths_ebgp: 64
                        af_maximum_paths_ibgp: 64
                        af_redist_connected: True
                        af_redist_connected_route_policy: 'ANY'
                neighbor_attr:
                # BGP Neighbors towards DCI
                    # BGP Neighbors towards SPINE
                    -   neighbor_id: 4001:1::5
                        nbr_remote_as: 200
                        nbr_description: 'Towards SPINE Connectivity to 4001:1::5'
                        nbr_update_source: 'loopback0'
                        nbr_keepalive_interval: 90
                        nbr_holdtime: 270
                        address_family_attr:
                            -   nbr_af_name: 'l2vpn evpn'
                                nbr_af_send_community: 'both'
            # BGP VRF Configs
            "VRF-vxlan-900001":
                bgp_id: 200
                # prefix: ''
                address_family_attr:
                  - af_name: 'ipv4 unicast'
                    af_advertise_l2_evpn: True
                    af_maximum_paths_ebgp: 64
                    af_maximum_paths_ibgp: 64
                    af_redist_connected: True
                    af_redist_connected_route_policy: 'ANY'
                  - af_name: 'ipv6 unicast'
                    af_advertise_l2_evpn: True
                    af_maximum_paths_ebgp: 64
                    af_maximum_paths_ibgp: 64
                    af_redist_connected: True
                    af_redist_connected_route_policy: 'ANY'

            "VRF-vxlan-900002":
                bgp_id: 200
                # prefix: ''
                address_family_attr:
                  - af_name: 'ipv4 unicast'
                    af_advertise_l2_evpn: True
                    af_maximum_paths_ebgp: 64
                    af_maximum_paths_ibgp: 64
                    af_redist_connected: True
                    af_redist_connected_route_policy: 'ANY'
                  - af_name: 'ipv6 unicast'
                    af_advertise_l2_evpn: True
                    af_maximum_paths_ebgp: 64
                    af_maximum_paths_ibgp: 64
                    af_redist_connected: True
                    af_redist_connected_route_policy: 'ANY'                    

    #-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-
    # Add missing (user defined) configs                               #
    #-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-

    missing_config: 

        # SPINE-Device
        node01_spine: |
            router bgp 200
                reconnect-interval 1

        # VPC-VTEP-1
        node02_vpcVtep1: |
            system nve infra-vlans 2
            vlan 2

            vrf context peer-keep-alive
            interface nve1
                source-interface loopback1 anycast loopback2
            router bgp 200
                reconnect-interval 1            
            vpc domain 100
                peer-switch
                role priority 10
                peer-keepalive destination 5.5.5.10 source 5.5.5.5 vrf peer-keep-alive
                peer-gateway
                layer3 peer-router
                ipv6 nd synchronize
                ip arp synchronize

            interface port-channel100
                vpc peer-link

            interface port-channel200
                vpc 200

        # VPC-VTEP-2
        node03_vpcVtep2: |
            system nve infra-vlans 2
            vlan 2

            vrf context peer-keep-alive
            interface nve1
                source-interface loopback1 anycast loopback2
            router bgp 200
                reconnect-interval 1
            vpc domain 100
                peer-switch
                role priority 10
                peer-keepalive destination 5.5.5.5 source 5.5.5.10 vrf peer-keep-alive
                peer-gateway
                layer3 peer-router
                ipv6 nd synchronize
                ip arp synchronize

            interface port-channel100
                vpc peer-link

            interface port-channel200
                vpc 200

        # std-VTEP-3
        node04_stdVtep3: |
            router bgp 200
                reconnect-interval 1 
                           
    #-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-
    # Features to be disabled as part of cleanup                       #
    #-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-

    disable_features:
        
        # SIPNE-Device
        node01_spine:
            - lldp
            - lacp
            - ospfv3
            - bgp
            - vxlan
        
        # VPC-VTEP-1
        node02_vpcVtep1:
            - lldp
            - vlan
            - vpc
            - lacp
            - ospfv3
            - bgp
            - vxlan
          
        # VPC-VTEP-2
        node03_vpcVtep2:
            - lldp
            - vlan
            - vpc
            - lacp
            - ospfv3
            - bgp
            - vxlan            
        
        # STANDLONE-VTEP-3
        node04_stdVtep3:
            - lldp
            - vlan
            - lacp
            - ospfv3
            - bgp
            - vxlan
            
        # FANOUT-Device
        node05_vpcFANOUT:
            - lldp
            - lacp      
    
    #-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-
    # Disabling the missing (user defined) configs                     #
    #-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-

    disable_missing_config:

        # VPC-VTEP-1
        node02_vpcVtep1: |
            no system nve infra-vlans 2
            no vlan 2
            no vrf context peer-keep-alive
            no route-map ANY permit 10
            no feature-set fex
            no install feature-set fex    

        # VPC-VTEP-2
        node03_vpcVtep2: |
            no system nve infra-vlans 2
            no vlan 2
            no vlan 1001-1002
            no vlan 101-102
            no vrf context peer-keep-alive
            no feature-set fex
            no install feature-set fex            

        # std-VTEP-3
        node04_stdVtep3: |
            no system nve infra-vlans 2
            no vlan 2
            no vlan 1001-1002
            no vlan 101-102
            no vrf context peer-keep-alive
            no feature-set fex
            no install feature-set fex            
