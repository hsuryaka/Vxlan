# ------------------------------------------------------
#        Node List:
#
#            node01_spine        : S1-FX3-SPINE
#            node02_vpcVtep1     : S1-FX3-BGW-1
#            node03_vpcVtep2     : S1-FX3-BGW-2
#            node04_stdVtep3      : S1-FX3-LEAF
#            node05_vpcFANOUT    : S1-BG-VPC_ACCESS
#
# ------------------------------------------------------
parameters:
    context: cli
    # ------------------------------------------------------
    # Features to be enabled
    # ------------------------------------------------------
    enable_features:
        # SPINE
        node01_spine:
            - lldp
            - lacp
            - ospfv3
            - pim4
            - bgp
            - vxlan
            - bfd
        # VPC VTEP-1
        node02_vpcVtep1:
            - lldp
            - vlan
            - vpc
            - lacp
            - ospfv3
            - pim4
            - bgp
            - vxlan
        # VPC VTEP-2
        node03_vpcVtep2:
            - lldp
            - vlan
            - vpc
            - lacp
            - ospfv3
            - pim4
            - bgp
            - vxlan
        # STD VTEP-3
        node04_stdVtep3:
            - lldp
            - vlan
            - lacp
            - ospfv3
            - pim4
            - bgp
            - vxlan
        # VPC ACCESS
        node05_vpcFANOUT:
            - lldp
            - vlan
            - lacp
    
    # ------------------------------------------------------
    # TCAM Carving configs
    # ------------------------------------------------------
    tcam_carving_config:
        node02_vpcVtep1: |
            system nve infra-vlans 5 force
        node03_vpcVtep2: |
            system nve infra-vlans 5 force

    # ------------------------------------------------------
    # Interface Level configs
    # ------------------------------------------------------
    interface_config: 

        # SPINE --------------------------
        node01_spine:
            loopback0:
                description: "### Router ID Loopback ###"
                enabled: True
                # ipv4:
                #     ip: 11.11.11.11
                #     prefix_length: 255.255.255.255
                ipv6:
                    ip: 4001:1::5
                    prefix_length: 128

            # SPINE towards VTEP-1 as Link-1 to Link-4
            nd01_nd02_1_1:
                enabled: True
            nd01_nd02_1_2:
                enabled: True
            nd01_nd02_1_3:
                enabled: True
            nd01_nd02_1_4:
                enabled: True            
            Port-channel211:
                channel_group_mode: active
                enabled: True
                switchport_enable: False
                add_members: nd01_nd02_1_1, nd01_nd02_1_2, nd01_nd02_1_3, nd01_nd02_1_4 
                ipv6:
                    ip: 2001:2:211:1::2
                    prefix_length: 64             
            # SPINE towards VTEP-2 as Link-1 to Link-4
            nd01_nd03_1_1:
                enabled: True
            nd01_nd03_1_2:
                enabled: True
            nd01_nd03_1_3:
                enabled: True
            nd01_nd03_1_4:
                enabled: True
            Port-channel212:
                channel_group_mode: active
                enabled: True
                switchport_enable: False
                add_members: nd01_nd03_1_1, nd01_nd03_1_2, nd01_nd03_1_3, nd01_nd03_1_4
                ipv6:
                    ip: 2001:2:212:1::2
                    prefix_length: 64               
            # SPINE towards VTEP-3 as Link-1 to Link-4
            nd01_nd04_1_1:
                enabled: True
            nd01_nd04_1_2:
                enabled: True
            nd01_nd04_1_3:
                enabled: True
            nd01_nd04_1_4:
                enabled: True
            Port-channel213:
                channel_group_mode: active
                enabled: True
                switchport_enable: False
                add_members: nd01_nd04_1_1, nd01_nd04_1_2, nd01_nd04_1_3, nd01_nd04_1_4
                ipv6:
                    ip: 2001:2:213:1::2
                    prefix_length: 64   

        # VPC VTEP-1 --------------------------
        node02_vpcVtep1:
            ### Loopback Interfaces
            loopback0:
                description: "### RID | Loopback ###"
                enabled: True
                # ipv4:
                #     ip: 20.1.1.1
                #     prefix_length: 255.255.255.0
                ipv6:
                    ip: 2001:211:1::1
                    prefix_length: 128
            loopback1:
                description: "### VTEP-1 | loopback interface ###"
                enabled: True
                ipv6:
                    ip: 3001:1:1::1
                    prefix_length: 128
            loopback2:
                description: "### VTEP-1 | Secondary loopback interface for v6 ###"
                enabled: True
                ipv6:
                    ip: 2001:1:1::1
                    prefix_length: 128

            # VTEP-1 towards SPINE as Link-1 to Link-4
            nd02_nd01_1_1:
                enabled: True
            nd02_nd01_1_2:
                enabled: True
            nd02_nd01_1_3:
                enabled: True
            nd02_nd01_1_4:
                enabled: True
            Port-channel211:
                channel_group_mode: active
                enabled: True
                switchport_enable: False
                add_members: nd02_nd01_1_1, nd02_nd01_1_2, nd02_nd01_1_3, nd02_nd01_1_4
                ipv6:
                    ip: 2001:2:211:1::3
                    prefix_length: 64 

            # VPC Peer-keep-alive
            nd02_nd03_1_1:
                enabled: True
                vrf : "keep_alive"
                description: "### VTEP-1 VPC Peer-keep-alive ###"
                switchport_enable: False
                ipv4:
                    ip: 5.5.5.5
                    prefix_length: 255.255.255.0

            # VPC Peer-Link
            nd02_nd03_1_2:
                enabled: True
            nd02_nd03_1_3:
                enabled: True
            nd02_nd03_1_4:
                enabled: True
            Port-channel100:
                channel_group_mode: active
                enabled: True
                switchport_enable: True
                spanning-tree port type: network
                switchport_mode: trunk
                #trunk_vlans: "2,3001-3004,1001-1008"
                add_members: nd02_nd03_1_2, nd02_nd03_1_3, nd02_nd03_1_4

            # VPC LEG-1
            nd02_nd05_1_1:
                enabled: True
            nd02_nd05_1_2:
                enabled: True
            nd02_nd05_1_3:
                enabled: True
            nd02_nd05_1_4:
                enabled: True
            Port-channel200:
                channel_group_mode: active
                enabled: True
                switchport_enable: True
                switchport_mode: trunk
                trunk_vlans: "1001-1008"
                add_members: nd02_nd05_1_1, nd02_nd05_1_2, nd02_nd05_1_3, nd02_nd05_1_4

            # IXIA TGEN
            nd02_tgen_1_1:
                enabled: True
                switchport_enable: True
                switchport_mode: trunk
                trunk_vlans: "1001-1008"

            # Backup SVI for VPC
            Vlan2:
                enabled: True
                description: "### Backup SVI ###"
                ipv4:
                    ip: 30.2.1.1
                    prefix_length: 255.255.255.0

            # L2VNI SVI Configs - Set-1
            # Vlan1001-1002:
            #     description: "L2VNI"
            #     fabric_forwarding_mode: anycast-gateway
            #     enabled: True
            #     vrf:
            #         start: 1
            #         #step: 0
            #         prefix: 'EVPN-VRF'
            #     ipv4:
            #         start_ipv4_addr: 2.1.1.1
            #         start_ipv4_prefix_len: 255.255.255.0
            #         step_ipv4_addr: 0.0.1.0
            #         step_ipv4_len: 0.0.0.0
            #         redirect: False
            #     ipv6:
            #         start_ipv6_addr: 2001:2:1:1::1
            #         start_ipv6_prefix_len: 64
            #         step_ipv6_addr: 0:0:0:1::0
            #         step_ipv6_prefix_len: 0
            #         redirect: False

            # # L2VNI SVI Configs - Set-2
            # Vlan1003-1005:
            #     description: "L2VNI"
            #     fabric_forwarding_mode: anycast-gateway
            #     enabled: True
            #     vrf:
            #         start: 2
            #         #step: 0
            #         prefix: 'EVPN-VRF'
            #     ipv4:
            #         start_ipv4_addr: 2.1.3.1
            #         start_ipv4_prefix_len: 255.255.255.0
            #         step_ipv4_addr: 0.0.1.0
            #         step_ipv4_len: 0.0.0.0
            #         redirect: False
            #     ipv6:
            #         start_ipv6_addr: 2001:2:1:3::1
            #         start_ipv6_prefix_len: 64
            #         step_ipv6_addr: 0:0:0:1::0
            #         step_ipv6_prefix_len: 0
            #         redirect: False

            # # L2VNI SVI Configs - Set-3
            # Vlan1006-1008:
            #     description: "L2VNI"
            #     fabric_forwarding_mode: anycast-gateway
            #     enabled: True
            #     vrf:
            #         start: 3
            #         #step: 0
            #         prefix: 'EVPN-VRF'
            #     ipv4:
            #         start_ipv4_addr: 2.1.6.1
            #         start_ipv4_prefix_len: 255.255.255.0
            #         step_ipv4_addr: 0.0.1.0
            #         step_ipv4_len: 0.0.0.0
            #         redirect: False
            #     ipv6:
            #         start_ipv6_addr: 2001:2:1:6::1
            #         start_ipv6_prefix_len: 64
            #         step_ipv6_addr: 0:0:0:1::0
            #         step_ipv6_prefix_len: 0
            #         redirect: False

            # # L3VNI SVI Configs
            # Vlan10-12:
            #     description: "L3VNI"
            #     enabled: True
            #     ip_forward: True
            #     ipv6_forward: True
            #     vrf:
            #         start: 1
            #         step: 1
            #         prefix: 'VRF'
            #     ipv4:
            #         redirect: False
            #     ipv6:
            #         redirect: False

            # # NVE Configs
            # nve1:
            #     description: 'NVE Interface'
            #     nve_host_reachability_protocol: bgp
            #     nve_src_intf_loopback: loopback1
            #     nve_src_intf_holddown: 240
            #     nve_global_ir_proto: bgp
            #     #nve_global_suppress_arp: False
            #     nve_adv_virtual_rmac: True
            #     enabled: True
            #     nve_vni_dict:
            #         # L2VNI
            #         20001-20008:
            #             nve_vni_type: 'L2'
            #             nve_vni_suppress_arp: False
            #             nve_vni_ir: true
            #             nve_vni_ir_proto: bgp
            #         # L3VNI
            #         10001:
            #             nve_vni_type: 'L3'
            #             nve_vni_associate_vrf: True
            #             nve_vni_suppress_arp: False
            #         10002:
            #             nve_vni_type: 'L3'
            #             nve_vni_associate_vrf: True
            #             nve_vni_suppress_arp: False
            #         10003:
            #             nve_vni_type: 'L3'
            #             nve_vni_associate_vrf: True
            #             nve_vni_suppress_arp: False
                    
        # VPC VTEP-2 --------------------------
        node03_vpcVtep2:
            ### Loopback Interfaces
            loopback0:
                description: "### Router ID Loopback ###"
                enabled: True
                # ipv4:
                #     ip: 1.12.1.1
                #     prefix_length: 255.255.255.255
                ipv6:
                    ip: 2001:212:1::1
                    prefix_length: 128
            loopback1:
                description: "### VTEP-2 | loopback interface ###"
                enabled: True
                ipv6:
                    ip: 3001:1:1::2
                    prefix_length: 128
            loopback2:
                description: "### VTEP-2 | Secondary loopback interface ###"
                enabled: True
                ipv6:
                    ip: 2001:1:1::1
                    prefix_length: 128 

            # VTEP-2 towards SPINE as Link-1 to Link-4
            nd03_nd01_1_1:
                enabled: True
            nd03_nd01_1_2:
                enabled: True
            nd03_nd01_1_3:
                enabled: True
            nd03_nd01_1_4:
                enabled: True            
            Port-channel212:
                channel_group_mode: active
                enabled: True
                switchport_enable: False
                add_members: nd03_nd01_1_1, nd03_nd01_1_2, nd03_nd01_1_3, nd03_nd01_1_4
                ipv6:
                    ip: 2001:2:212:1::3
                    prefix_length: 64  

            # VPC Peer-keep-alive
            nd03_nd02_1_1:
                enabled: True
                vrf : "keep_alive"
                description: "### Peer-keep-alive ###"
                ipv4:
                    ip: 5.5.5.10
                    prefix_length: 255.255.255.0

            # VPC Peer-Link
            nd03_nd02_1_2:
                enabled: True
            nd03_nd02_1_3:
                enabled: True
            nd03_nd02_1_4:
                enabled: True
            Port-channel100:
                channel_group_mode: active
                enabled: True
                switchport_enable: True
                spanning-tree port type: network
                switchport_mode: trunk
                #trunk_vlans: "2,3001-3004,1001-1008"
                add_members: nd03_nd02_1_2, nd03_nd02_1_3, nd03_nd02_1_4

            # VPC LEG-2
            nd03_nd05_1_1:
                enabled: True
            nd03_nd05_1_2:
                enabled: True
            nd03_nd05_1_3:
                enabled: True
            nd03_nd05_1_4:
                enabled: True
            Port-channel200:
                channel_group_mode: active
                enabled: True
                switchport_enable: True
                switchport_mode: trunk
                trunk_vlans: "1001-1008"
                add_members: nd03_nd05_1_1, nd03_nd05_1_2, nd03_nd05_1_3, nd03_nd05_1_4

            # IXIA TGEN
            nd03_tgen_1_1:
                enabled: True
                switchport_enable: True
                switchport_mode: trunk
                trunk_vlans: "1001-1008"

            # Backup SVI for VPC
            Vlan2:
                enabled: True
                description: "### Backup SVI ###"
                ipv4:
                    ip: 30.2.1.2
                    prefix_length: 255.255.255.0
            
            # L2VNI SVI Configs - Set-1
            # Vlan1001-1002:
            #     description: "L2VNI"
            #     fabric_forwarding_mode: anycast-gateway
            #     enabled: True
            #     vrf:
            #         start: 1
            #         step: 0
            #         prefix: 'VRF'
            #     ipv4:
            #         start_ipv4_addr: 2.1.1.1
            #         start_ipv4_prefix_len: 255.255.255.0
            #         step_ipv4_addr: 0.0.1.0
            #         step_ipv4_len: 0.0.0.0
            #         redirect: False
            #     ipv6:
            #         start_ipv6_addr: 2001:2:1:1::1
            #         start_ipv6_prefix_len: 64
            #         step_ipv6_addr: 0:0:0:1::0
            #         step_ipv6_prefix_len: 0
            #         redirect: False

            # # L2VNI SVI Configs - Set-2
            # Vlan1003-1005:
            #     description: "L2VNI"
            #     fabric_forwarding_mode: anycast-gateway
            #     enabled: True
            #     vrf:
            #         start: 2
            #         step: 0
            #         prefix: 'VRF'
            #     ipv4:
            #         start_ipv4_addr: 2.1.3.1
            #         start_ipv4_prefix_len: 255.255.255.0
            #         step_ipv4_addr: 0.0.1.0
            #         step_ipv4_len: 0.0.0.0
            #         redirect: False
            #     ipv6:
            #         start_ipv6_addr: 2001:2:1:3::1
            #         start_ipv6_prefix_len: 64
            #         step_ipv6_addr: 0:0:0:1::0
            #         step_ipv6_prefix_len: 0
            #         redirect: False

            # # L2VNI SVI Configs - Set-3
            # Vlan1006-1008:
            #     description: "L2VNI"
            #     fabric_forwarding_mode: anycast-gateway
            #     enabled: True
            #     vrf:
            #         start: 3
            #         step: 0
            #         prefix: 'VRF'
            #     ipv4:
            #         start_ipv4_addr: 2.1.6.1
            #         start_ipv4_prefix_len: 255.255.255.0
            #         step_ipv4_addr: 0.0.1.0
            #         step_ipv4_len: 0.0.0.0
            #         redirect: False
            #     ipv6:
            #         start_ipv6_addr: 2001:2:1:6::1
            #         start_ipv6_prefix_len: 64
            #         step_ipv6_addr: 0:0:0:1::0
            #         step_ipv6_prefix_len: 0
            #         redirect: False

            # # L3VNI SVI Configs
            # Vlan10-12:
            #     description: "L3VNI"
            #     enabled: True
            #     ip_forward: True
            #     ipv6_forward: True
            #     vrf:
            #         start: 1
            #         step: 1
            #         prefix: 'VRF'
            #     ipv4:
            #         redirect: False
            #     ipv6:
            #         redirect: False

            # # NVE Configs
            # nve1:
            #     description: 'NVE Interface'
            #     nve_host_reachability_protocol: bgp
            #     nve_src_intf_loopback: loopback1
            #     nve_src_intf_holddown: 240
            #     nve_global_ir_proto: bgp
            #     #nve_global_suppress_arp: False
            #     nve_adv_virtual_rmac: True
            #     enabled: True
            #     nve_vni_dict:
            #         # L2VNI
            #         20001-20008:
            #             nve_vni_type: 'L2'
            #             nve_vni_suppress_arp: False
            #             nve_vni_ir: true
            #             nve_vni_ir_proto: bgp
            #         # L3VNI
            #         10001:
            #             nve_vni_type: 'L3'
            #             nve_vni_associate_vrf: True
            #             nve_vni_suppress_arp: False
            #         10002:
            #             nve_vni_type: 'L3'
            #             nve_vni_associate_vrf: True
            #             nve_vni_suppress_arp: False
            #         10003:
            #             nve_vni_type: 'L3'
            #             nve_vni_associate_vrf: True
            #             nve_vni_suppress_arp: False
                    

        # STD VTEP-3 --------------------------
        node04_stdVtep3:
            ### Loopback Interfaces
            loopback0:
                description: "### RID | Loopback ###"
                enabled: True
                # ipv4:
                #     ip: 2.213.1.1
                #     prefix_length: 255.255.255.0
                ipv6:
                    ip: 2001:213:1::1
                    prefix_length: 64  
            loopback1:
                description: "### VTEP-3 loopback interface ###"
                enabled: True
                ipv6:
                    ip: 3001:1:1::3
                    prefix_length: 128

            # VTEP-3 to SPINE
            nd04_nd01_1_1:
                enabled: True
            nd04_nd01_1_2:
                enabled: True
            nd04_nd01_1_3:
                enabled: True
            nd04_nd01_1_4:
                enabled: True
            Port-channel213:
                channel_group_mode: active
                enabled: True
                switchport_enable: False
                add_members: nd04_nd01_1_1, nd04_nd01_1_1, nd04_nd01_1_3, nd04_nd01_1_4          
                ipv6:
                    ip: 2001:2:213:1::3
                    prefix_length: 128  

            # IXIA TGEN
            nd04_tgen_1_1:
                enabled: True
                switchport_enable: True
                switchport_mode: trunk
                trunk_vlans: "1001-1008"

            # L2VNI SVI Configs - Set-1
            # Vlan1001-1002:
            #     description: "L2VNI"
            #     fabric_forwarding_mode: anycast-gateway
            #     enabled: True
            #     vrf:
            #         start: 1
            #         step: 0
            #         prefix: 'VRF'
            #     ipv4:
            #         start_ipv4_addr: 2.1.1.1
            #         start_ipv4_prefix_len: 255.255.255.0
            #         step_ipv4_addr: 0.0.1.0
            #         step_ipv4_len: 0.0.0.0
            #         redirect: False
            #     ipv6:
            #         start_ipv6_addr: 2001:2:1:1::1
            #         start_ipv6_prefix_len: 64
            #         step_ipv6_addr: 0:0:0:1::0
            #         step_ipv6_prefix_len: 0
            #         redirect: False

            # # L2VNI SVI Configs - Set-2
            # Vlan1003-1005:
            #     description: "L2VNI"
            #     fabric_forwarding_mode: anycast-gateway
            #     enabled: True
            #     vrf:
            #         start: 2
            #         step: 0
            #         prefix: 'VRF'
            #     ipv4:
            #         start_ipv4_addr: 2.1.3.1
            #         start_ipv4_prefix_len: 255.255.255.0
            #         step_ipv4_addr: 0.0.1.0
            #         step_ipv4_len: 0.0.0.0
            #         redirect: False
            #     ipv6:
            #         start_ipv6_addr: 2001:2:1:3::1
            #         start_ipv6_prefix_len: 64
            #         step_ipv6_addr: 0:0:0:1::0
            #         step_ipv6_prefix_len: 0
            #         redirect: False

            # # L2VNI SVI Configs - Set-3
            # Vlan1006-1008:
            #     description: "L2VNI"
            #     fabric_forwarding_mode: anycast-gateway
            #     enabled: True
            #     vrf:
            #         start: 3
            #         step: 0
            #         prefix: 'VRF'
            #     ipv4:
            #         start_ipv4_addr: 2.1.6.1
            #         start_ipv4_prefix_len: 255.255.255.0
            #         step_ipv4_addr: 0.0.1.0
            #         step_ipv4_len: 0.0.0.0
            #         redirect: False
            #     ipv6:
            #         start_ipv6_addr: 2001:2:1:6::1
            #         start_ipv6_prefix_len: 64
            #         step_ipv6_addr: 0:0:0:1::0
            #         step_ipv6_prefix_len: 0
            #         redirect: False

            # # L3VNI SVI Configs
            # Vlan10-12:
            #     description: "L3VNI"
            #     enabled: True
            #     ip_forward: True
            #     ipv6_forward: True
            #     vrf:
            #         start: 1
            #         step: 1
            #         prefix: 'VRF'
            #     ipv4:
            #         redirect: False
            #     ipv6:
            #         redirect: False

            # # NVE Configs
            # nve1:
            #     description: 'NVE Interface'
            #     nve_host_reachability_protocol: bgp
            #     nve_src_intf_loopback: loopback1
            #     nve_src_intf_holddown: 240
            #     nve_global_ir_proto: bgp
            #     #nve_global_suppress_arp: False
            #     nve_adv_virtual_rmac: True
            #     enabled: True
            #     nve_vni_dict:
            #         # L2VNI
            #         20001-20008:
            #             nve_vni_type: 'L2'
            #             nve_vni_suppress_arp: False
            #             nve_vni_ir: true
            #             nve_vni_ir_proto: bgp
            #         # L3VNI
            #         10001:
            #             nve_vni_type: 'L3'
            #             nve_vni_associate_vrf: True
            #             nve_vni_suppress_arp: False
            #         10002:
            #             nve_vni_type: 'L3'
            #             nve_vni_associate_vrf: True
            #             nve_vni_suppress_arp: False
            #         10003:
            #             nve_vni_type: 'L3'
            #             nve_vni_associate_vrf: True
            #             nve_vni_suppress_arp: False

        # ACCESS --------------------------
        node05_vpcFANOUT:
            
            # VPC PO
            nd05_nd02_1_1:
                enabled: True
            nd05_nd02_1_2:
                enabled: True
            nd05_nd02_1_3:
                enabled: True
            nd05_nd02_1_4:
                enabled: True
            nd05_nd03_1_1:
                enabled: True
            nd05_nd03_1_2:
                enabled: True
            nd05_nd03_1_3:
                enabled: True
            nd05_nd03_1_4:
                enabled: True
            Port-channel200:
                channel_group_mode: active
                enabled: True
                switchport_enable: True
                switchport_mode: trunk
                #trunk_vlans: "1001-1008"
                add_members: nd05_nd02_1_1, nd05_nd02_1_2, nd05_nd02_1_3, nd05_nd02_1_4, nd05_nd03_1_1, nd05_nd03_1_2, nd05_nd03_1_3, nd05_nd03_1_4

            # IXIA TGEN
            nd05_tgen_1_1:
                enabled: True
                switchport_enable: True
                switchport_mode: trunk
                #trunk_vlans: "1001-1008"

    # ------------------------------------------------------
    # OSPFv3 COnfigs
    # ------------------------------------------------------
    ospfv3_config:
        
        # SPINE --------------------------
        node01_spine:
            default:
                instance: vxlan
                router_id: 3.1.1.2
                log_adjacency_changes: True
                log_adjacency_changes_detail: True
                interface_config:
                    # Loopbacks
                    lo0:
                        if_admin_control: True
                        area: 0.0.0.0
                    # To VTEP-1
                    Port-channel211:
                        if_admin_control: True
                        area: 0.0.0.0
                        if_cost: 1
                        if_type: 'point-to-point'
                    # To VTEP-2
                    Port-channel212:
                        if_admin_control: True
                        area: 0.0.0.0
                        if_cost: 1
                        if_type: 'point-to-point'

                    # To VTEP-3
                    Port-channel213:
                        if_admin_control: True
                        area: 0.0.0.0
                        if_cost: 1
                        if_type: 'point-to-point'

        # VPC VTEP-1 --------------------------
        node02_vpcVtep1:
            default:
                instance: vxlan
                router_id: 2.1.1.1
                log_adjacency_changes: True
                log_adjacency_changes_detail: True
                interface_config:
                    # Loopbacks
                    lo0:
                        if_admin_control: True
                        area: 0.0.0.0
                    lo1:
                        if_admin_control: True
                        area: 0.0.0.0
                    lo2:
                        if_admin_control: True
                        area: 0.0.0.0
                    # TO SPINE
                    Port-channel211:
                        if_admin_control: True
                        area: 0.0.0.0
                        if_cost: 1
                        if_type: 'point-to-point'
                    # Back up Link
                    vlan2:
                        if_admin_control: True
                        area: 0.0.0.0
                        if_cost: 1
                        if_type: 'point-to-point'

        # VPC VTEP-2 --------------------------
        node03_vpcVtep2:
            default:
                instance: vxlan
                router_id: 2.212.1.1
                log_adjacency_changes: True
                log_adjacency_changes_detail: True
                interface_config:
                    # Loopbacks
                    lo0:
                        if_admin_control: True
                        area: 0.0.0.0
                    lo1:
                        if_admin_control: True
                        area: 0.0.0.0
                    lo2:
                        if_admin_control: True
                        area: 0.0.0.0
                    # TO SPINE
                    Port-channel212:
                        if_admin_control: True
                        area: 0.0.0.0
                        if_cost: 1
                        if_type: 'point-to-point'

        # STD LEAF --------------------------
        node04_stdVtep3:
            default:
                instance: vxlan
                router_id: 2.213.1.1
                log_adjacency_changes: True
                log_adjacency_changes_detail: True
                interface_config:
                    # Loopbacks
                    lo0:
                        if_admin_control: True
                        area: 0.0.0.0
                    lo1:
                        if_admin_control: True
                        area: 0.0.0.0
                    # TO SPINE
                    Port-channel213:
                        if_admin_control: True
                        area: 0.0.0.0
                        if_cost: 1
                        if_type: 'point-to-point'

    # ------------------------------------------------------
    # VLAN Configs 
    # ------------------------------------------------------
    vlan_config:
        
        # VPC VTEP-1 --------------------------
        node02_vpcVtep1:
            -   vlan: "1001-1008"
                vn_segment_id: "20001-20008"
            # -   vlan: "10-12"
            #     vn_segment_id: "10001-10003"
            -   vlan: "2"    

        # VPC VTEP-2 --------------------------
        node03_vpcVtep2:
            -   vlan: "1001-1008"
                vn_segment_id: "20001-20008"
            # -   vlan: "10-12"
            #     vn_segment_id: "10001-10003"
            -   vlan: "2"    

        # STD VTEP-3 --------------------------
        node04_stdVtep3:
            -   vlan: "1001-1008"
                vn_segment_id: "20001-20008"
            # -   vlan: "10-12"
            #     vn_segment_id: "10001-10003"

    # ------------------------------------------------------
    # route-map Configs
    # ------------------------------------------------------
    route_policy_config: {}

        # SPINE --------------------------
        # node01_spine:
        #     -   route_policy: "RMAP_PERMIT_ALL"
        #         route_disposition: "permit"
        #         statement_name: 10
        #     -   route_policy: "RMAP_NH_UNCHANGED"
        #         route_disposition: "permit"
        #         statement_name: 10
        #         set_next_hop: 'unchanged'
        
        # # VPC VTEP-1 --------------------------
        # node02_vpcVtep1:
        #     -   route_policy: "RMAP_PERMIT_ALL"
        #         route_disposition: "permit"
        #         statement_name: 10

        # # VPC VTEP-2 --------------------------
        # node03_vpcVtep2:
        #     -   route_policy: "RMAP_PERMIT_ALL"
        #         route_disposition: "permit"
        #         statement_name: 10

        # # STD VTEP-3 --------------------------
        # node04_stdVtep3:
        #     -   route_policy: "RMAP_PERMIT_ALL"
        #         route_disposition: "permit"
        #         statement_name: 10

    # ------------------------------------------------------
    # VxLAN Configs
    # ------------------------------------------------------
    vxlan_config:
        
        # VPC VTEP-1 --------------------------
        node02_vpcVtep1:
            fabric_fwd_anycast_gw_mac: 0000.000a.aaaa

        # VPC VTEP-2 --------------------------
        node03_vpcVtep2:
            fabric_fwd_anycast_gw_mac: 0000.000a.aaaa

        # STD VTEP-3 --------------------------
        node04_stdVtep3:
            fabric_fwd_anycast_gw_mac: 0000.000a.aaaa

    # ------------------------------------------------------
    # VxLAN EVPN Configs
    # ------------------------------------------------------
    evpn_config:
        
        # VPC VTEP-1 --------------------------
        node02_vpcVtep1:
            vni_list:
                -   vni_id: 20001-20008
                    rd: auto
                    rt_list:
                        -   rt: "auto"
                            rt_type: both

        # VPC VTEP-2 --------------------------
        node03_vpcVtep2:
            vni_list:
                -   vni_id: 20001-20008
                    rd: auto
                    rt_list:
                        -   rt: "auto"
                            rt_type: both

        # STD VTEP-3 --------------------------
        node04_stdVtep3:
            vni_list:
                -   vni_id: 20001-20008
                    rd: auto
                    rt_list:
                        -   rt: "auto"
                            rt_type: both

    # ------------------------------------------------------
    # VRF Configs
    # ------------------------------------------------------
    vrf_config: {}

        # VPC VTEP-1 --------------------------
        # node02_vpcVtep1:
        #     vrf_list:
        #         -   prefix: "VRF"
        #             vrf_name: "1-3"
        #             vni: "10001-10003"
        #             rd: 'auto'
        #             address_family_attr:
        #               - af_name: 'ipv4 unicast'
        #                 rt_attr: 'auto'
        #                 rt_type: 'both'
        #                 protocols:
        #                  - protocol: 'evpn'
        #                    rt_evpn: True
        #               - af_name: 'ipv6 unicast'
        #                 rt_attr: 'auto'
        #                 rt_type: 'both'
        #                 protocols:
        #                  - protocol: 'evpn'
        #                    rt_evpn: True

        # # VPC VTEP-2 --------------------------
        # node03_vpcVtep2:
        #     vrf_list:
        #         -   prefix: "VRF"
        #             vrf_name: "1-3"
        #             vni: "10001-10003"
        #             rd: 'auto'
        #             address_family_attr:
        #               - af_name: 'ipv4 unicast'
        #                 rt_attr: 'auto'
        #                 rt_type: 'both'
        #                 protocols:
        #                  - protocol: 'evpn'
        #                    rt_evpn: True
        #               - af_name: 'ipv6 unicast'
        #                 rt_attr: 'auto'
        #                 rt_type: 'both'
        #                 protocols:
        #                  - protocol: 'evpn'
        #                    rt_evpn: True

        # # STD VTEP-3 --------------------------
        # node04_stdVtep3:
        #     vrf_list:
        #         -   prefix: "VRF"
        #             vrf_name: "1-3"
        #             vni: "10001-10003"
        #             rd: 'auto'
        #             address_family_attr:
        #               - af_name: 'ipv4 unicast'
        #                 rt_attr: 'auto'
        #                 rt_type: 'both'
        #                 protocols:
        #                  - protocol: 'evpn'
        #                    rt_evpn: True
        #               - af_name: 'ipv6 unicast'
        #                 rt_attr: 'auto'
        #                 rt_type: 'both'
        #                 protocols:
        #                  - protocol: 'evpn'
        #                    rt_evpn: True

    # ------------------------------------------------------
    # IGMP COnfigs
    # ------------------------------------------------------
    igmp_config: {}

        # # SAMPLE --------------------------
        # node14_s3_leaf:
        #     default:
        #         interface_config:
        #             vlan1001-1072:
        #                 enable: True
        #                 version: 3
        #             vlan1501-1572:
        #                 enable: True
        #                 version: 3

    # ------------------------------------------------------
    # MLD COnfigs
    # ------------------------------------------------------
    mld_config: {}
        
        # # Site-1 BGW-1 --------------------------
        # node04_s1_bgw1:
        #     default:
        #         interface_config:
        #             vlan1001-1072:
        #                 enable: True
        #                 version: 1
        #             vlan1501-1572:
        #                 enable: True
        #                 version: 1

    # ------------------------------------------------------
    # PIM Configs
    # ------------------------------------------------------
    pim_config: {}

        # SPINE --------------------------
        # node01_spine:
        #     default:
        #         sg_expiry_timer: 1000
        #         rp_address:
        #             -   static_rp_address: 11.11.11.11
        #                 static_rp_group_list: 225.0.0.0/4
        #         interface_config:
        #             # Underlay Loopbacks
        #             lo0:
        #                 mode: sparse-mode
        #             # To VTEP-1
        #             nd01_nd02_1_1:
        #                 mode: sparse-mode
        #             nd01_nd02_1_2:
        #                 mode: sparse-mode
        #             nd01_nd02_1_3:
        #                 mode: sparse-mode
        #             nd01_nd02_1_4:
        #                 mode: sparse-mode
        #             # To VTEP-2
        #             nd01_nd03_1_1:
        #                 mode: sparse-mode
        #             nd01_nd03_1_2:
        #                 mode: sparse-mode
        #             nd01_nd03_1_3:
        #                 mode: sparse-mode
        #             nd01_nd03_1_4:
        #                 mode: sparse-mode
        #             # To VTEP-3
        #             nd01_nd04_1_1:
        #                 mode: sparse-mode
        #             nd01_nd04_1_2:
        #                 mode: sparse-mode
        #             nd01_nd04_1_3:
        #                 mode: sparse-mode
        #             nd01_nd04_1_4:
        #                 mode: sparse-mode

        # VPC VTEP-1 --------------------------
        # node02_vpcVtep1:
        #     default:
        #         sg_expiry_timer: 1000
        #         rp_address:
        #             -   static_rp_address: 11.11.11.11
        #                 static_rp_group_list: 225.0.0.0/4
        #         interface_config:
        #             # Underlay Loopbacks
        #             lo0-2:
        #                 mode: sparse-mode
        #             ### Underlay Interfaces
        #             # To SPINE
        #             nd02_nd01_1_1:
        #                 mode: sparse-mode
        #             nd02_nd01_1_2:
        #                 mode: sparse-mode
        #             nd02_nd01_1_3:
        #                 mode: sparse-mode
        #             nd02_nd01_1_4:
        #                 mode: sparse-mode
        #             ### L2VNI SVI's
        #             vlan1001-1005:
        #                 mode: sparse-mode
        #             vlan1101-1105:
        #                 mode: sparse-mode
        #             vlan1501-1505:
        #                 mode: sparse-mode
        #             vlan1601-1605:
        #                 mode: sparse-mode
        #             ### L3VNI SVI's
        #             vlan3001-3005:
        #                 mode: sparse-mode

        # VPC VTEP-2 --------------------------
        # node03_vpcVtep2:
        #     default:
        #         sg_expiry_timer: 1000
        #         rp_address:
        #             -   static_rp_address: 11.11.11.11
        #                 static_rp_group_list: 225.0.0.0/4
        #         interface_config:
        #             # Underlay Loopbacks
        #             lo0-2:
        #                 mode: sparse-mode
        #             ### Underlay Interfaces
        #             # To SPINE
        #             nd03_nd01_1_1:
        #                 mode: sparse-mode
        #             nd03_nd01_1_2:
        #                 mode: sparse-mode
        #             nd03_nd01_1_3:
        #                 mode: sparse-mode
        #             nd03_nd01_1_4:
        #                 mode: sparse-mode
        #             ### L2VNI SVI's
        #             vlan1001-1005:
        #                 mode: sparse-mode
        #             vlan1101-1105:
        #                 mode: sparse-mode
        #             vlan1501-1505:
        #                 mode: sparse-mode
        #             vlan1601-1605:
        #                 mode: sparse-mode
        #             ### L3VNI SVI's
        #             vlan3001-3005:
        #                 mode: sparse-mode

        # STD VTEP-2 --------------------------
        # node04_stdVtep3:
        #     default:
        #         sg_expiry_timer: 1000
        #         rp_address:
        #             -   static_rp_address: 11.11.11.11
        #                 static_rp_group_list: 225.0.0.0/4
        #         interface_config:
        #             # Underlay Loopbacks
        #             lo0-1:
        #                 mode: sparse-mode
        #             ### Underlay Interfaces
        #             # To SPINE
        #             nd04_nd01_1_1:
        #                 mode: sparse-mode
        #             nd04_nd01_1_2:
        #                 mode: sparse-mode
        #             nd04_nd01_1_3:
        #                 mode: sparse-mode
        #             nd04_nd01_1_4:
        #                 mode: sparse-mode
        #             ### L2VNI SVI's
        #             vlan1001-1005:
        #                 mode: sparse-mode
        #             vlan1101-1105:
        #                 mode: sparse-mode
        #             vlan1501-1505:
        #                 mode: sparse-mode
        #             vlan1601-1605:
        #                 mode: sparse-mode
        #             ### L3VNI SVI's
        #             vlan3001-3005:
        #                 mode: sparse-mode

    # ------------------------------------------------------
    # BGP configuration
    # ------------------------------------------------------
    bgp_config: 

        # SPINE --------------------------
        node01_spine:
            default:
                bgp_id: 200
                router_id: 11.11.11.11
                keepalive_interval: 90
                prefix_peer_timeout: 270
                holdtime: 270
                graceful_restart_restart_time: 600
                log_neighbor_changes: True
        #         address_family_attr:
        #             -   af_name: 'l2vpn evpn'
        #                 af_maximum_paths_ebgp: 64
        #                 af_retain_rt_all: True
        #             -   af_name: 'ipv4 unicast'
        #                 af_maximum_paths_ebgp: 64
        #                 af_maximum_paths_ibgp: 64
        #                 af_redist_connected: True
        #                 af_redist_connected_route_policy: 'RMAP_PERMIT_ALL'
        #             -   af_name: 'ipv6 unicast'
        #                 af_maximum_paths_ebgp: 64
        #                 af_maximum_paths_ibgp: 64
        #                 af_redist_connected: True
        #                 af_redist_connected_route_policy: 'RMAP_PERMIT_ALL'
        #         neighbor_attr:
        #         # BGP Neighbors towards VTEPS
        #             # Underlay BGP Session
        #             -   neighbor_id: 2001:211:1::1
        #                 nbr_remote_as: 200
        #                 nbr_description: 'VTEP-1 Connectivity to 2001:211:1::1'
        #                 nbr_update_source: 'loopback0'
        #                 nbr_keepalive_interval: 90
        #                 nbr_holdtime: 270
        #                 address_family_attr:
        #                     -   nbr_af_name: 'l2vpn evpn'
        #                         nbr_af_send_community: 'both'
        #                         nbr_af_route_reflector_client: True
        #             -   neighbor_id: 2001:212:1::1
        #                 nbr_remote_as: 200
        #                 nbr_description: 'VTEP-2 Connectivity to 2001:212:1::1'
        #                 nbr_update_source: 'loopback0'
        #                 nbr_keepalive_interval: 90
        #                 nbr_holdtime: 270
        #                 address_family_attr:
        #                     -   nbr_af_name: 'l2vpn evpn'
        #                         nbr_af_send_community: 'both'
        #                         nbr_af_route_reflector_client: True
        #             -   neighbor_id: 2001:213:1::1
        #                 nbr_remote_as: 200
        #                 nbr_description: 'VTEP-3 Connectivity to 2001:213:1::1'
        #                 nbr_update_source: 'loopback0'
        #                 nbr_keepalive_interval: 90
        #                 nbr_holdtime: 270
        #                 address_family_attr:
        #                     -   nbr_af_name: 'l2vpn evpn'
        #                         nbr_af_send_community: 'both'
        #                         nbr_af_route_reflector_client: True

        # # VPC VTEP-1 --------------------------
        node02_vpcVtep1:
            default:
                bgp_id: 200
                router_id: 2.211.1.1
                keepalive_interval: 90
                prefix_peer_timeout: 270
                holdtime: 270
                graceful_restart_restart_time: 600
                log_neighbor_changes: True
        #         address_family_attr:
        #             -   af_name: 'l2vpn evpn'
        #                 af_advertise_pip: True
        #                 af_maximum_paths_ebgp: 64
        #                 af_retain_rt_all: True
        #             -   af_name: 'ipv4 unicast'
        #                 af_maximum_paths_ebgp: 64
        #                 af_maximum_paths_ibgp: 64
        #                 af_redist_connected: True
        #                 af_redist_connected_route_policy: 'RMAP_REDIST_TAG_ANY'
        #             -   af_name: 'ipv6 unicast'
        #                 af_maximum_paths_ebgp: 64
        #                 af_maximum_paths_ibgp: 64
        #                 af_redist_connected: True
        #                 af_redist_connected_route_policy: 'RMAP_PERMIT_ALL'
        #         neighbor_attr:
        #         # BGP Neighbors towards DCI
        #             # BGP Neighbors towards SPINE
        #             -   neighbor_id: 4001:1::5
        #                 nbr_remote_as: 200
        #                 nbr_description: 'SPINE Connectivity to 4001:1::5'
        #                 nbr_update_source: 'loopback0'
        #                 nbr_keepalive_interval: 90
        #                 nbr_holdtime: 270
        #                 address_family_attr:
        #                     -   nbr_af_name: 'l2vpn evpn'
        #                         nbr_af_send_community: 'both'
        #     # BGP VRF Configs
        #     "1-3":
        #         bgp_id: 200
        #         prefix: 'VRF'
        #         address_family_attr:
        #           - af_name: 'ipv4 unicast'
        #             af_advertise_l2_evpn: True
        #             af_maximum_paths_ebgp: 64
        #             af_maximum_paths_ibgp: 64
        #             af_redist_connected: True
        #             af_redist_connected_route_policy: 'RMAP_PERMIT_ALL'
        #           - af_name: 'ipv6 unicast'
        #             af_advertise_l2_evpn: True
        #             af_maximum_paths_ebgp: 64
        #             af_maximum_paths_ibgp: 64
        #             af_redist_connected: True
        #             af_redist_connected_route_policy: 'RMAP_PERMIT_ALL'

        # # VPC VTEP-2 --------------------------
        node03_vpcVtep2:
            default:
                bgp_id: 200
                router_id: 2.212.1.1
                keepalive_interval: 90
                prefix_peer_timeout: 270
                holdtime: 270
                graceful_restart_restart_time: 600
                log_neighbor_changes: True
        #         address_family_attr:
        #             -   af_name: 'l2vpn evpn'
        #                 af_advertise_pip: True
        #                 af_maximum_paths_ebgp: 64
        #                 af_retain_rt_all: True
        #             -   af_name: 'ipv4 unicast'
        #                 af_maximum_paths_ebgp: 64
        #                 af_maximum_paths_ibgp: 64
        #                 af_redist_connected: True
        #                 af_redist_connected_route_policy: 'RMAP_REDIST_TAG_ANY'
        #             -   af_name: 'ipv6 unicast'
        #                 af_maximum_paths_ebgp: 64
        #                 af_maximum_paths_ibgp: 64
        #                 af_redist_connected: True
        #                 af_redist_connected_route_policy: 'RMAP_PERMIT_ALL'
        #         neighbor_attr:
        #         # BGP Neighbors towards DCI
        #             # BGP Neighbors towards SPINE
        #             -   neighbor_id: 4001:1::5
        #                 nbr_remote_as: 200
        #                 nbr_description: 'SPINE Connectivity to 4001:1::5'
        #                 nbr_update_source: 'loopback0'
        #                 nbr_keepalive_interval: 90
        #                 nbr_holdtime: 270
        #                 address_family_attr:
        #                     -   nbr_af_name: 'l2vpn evpn'
        #                         nbr_af_send_community: 'both'
        #     # BGP VRF Configs
        #     "1-3":
        #         bgp_id: 200
        #         prefix: 'VRF'
        #         address_family_attr:
        #           - af_name: 'ipv4 unicast'
        #             af_advertise_l2_evpn: True
        #             af_maximum_paths_ebgp: 64
        #             af_maximum_paths_ibgp: 64
        #             af_redist_connected: True
        #             af_redist_connected_route_policy: 'RMAP_PERMIT_ALL'
        #           - af_name: 'ipv6 unicast'
        #             af_advertise_l2_evpn: True
        #             af_maximum_paths_ebgp: 64
        #             af_maximum_paths_ibgp: 64
        #             af_redist_connected: True
        #             af_redist_connected_route_policy: 'RMAP_PERMIT_ALL'

        # # STD VTEP-3 --------------------------
        node04_stdVtep3:
            default:
                bgp_id: 200
                router_id: 2.213.1.1
                keepalive_interval: 90
                prefix_peer_timeout: 270
                holdtime: 270
                graceful_restart_restart_time: 600
                log_neighbor_changes: True
        #         address_family_attr:
        #             -   af_name: 'l2vpn evpn'
        #                 af_maximum_paths_ebgp: 64
        #                 af_retain_rt_all: True
        #             -   af_name: 'ipv4 unicast'
        #                 af_maximum_paths_ebgp: 64
        #                 af_maximum_paths_ibgp: 64
        #                 af_redist_connected: True
        #                 af_redist_connected_route_policy: 'RMAP_REDIST_TAG_54321'
        #             -   af_name: 'ipv6 unicast'
        #                 af_maximum_paths_ebgp: 64
        #                 af_maximum_paths_ibgp: 64
        #                 af_redist_connected: True
        #                 af_redist_connected_route_policy: 'RMAP_PERMIT_ALL'
        #         neighbor_attr:
        #         # BGP Neighbors towards DCI
        #             # BGP Neighbors towards SPINE
        #             -   neighbor_id: 4001:1::5
        #                 nbr_remote_as: 200
        #                 nbr_description: 'SPINE Connectivity to 4001:1::5'
        #                 nbr_update_source: 'loopback0'
        #                 nbr_keepalive_interval: 90
        #                 nbr_holdtime: 270
        #                 address_family_attr:
        #                     -   nbr_af_name: 'l2vpn evpn'
        #                         nbr_af_send_community: 'both'
        #     # BGP VRF Configs
        #     "1-3":
        #         bgp_id: 200
        #         prefix: 'VRF'
        #         address_family_attr:
        #           - af_name: 'ipv4 unicast'
        #             af_advertise_l2_evpn: True
        #             af_maximum_paths_ebgp: 64
        #             af_maximum_paths_ibgp: 64
        #             af_redist_connected: True
        #             af_redist_connected_route_policy: 'RMAP_PERMIT_ALL'
        #           - af_name: 'ipv6 unicast'
        #             af_advertise_l2_evpn: True
        #             af_maximum_paths_ebgp: 64
        #             af_maximum_paths_ibgp: 64
        #             af_redist_connected: True
        #             af_redist_connected_route_policy: 'RMAP_PERMIT_ALL'

    # ------------------------------------------------------
    # Add missing (user defined) configs
    # ------------------------------------------------------
    missing_config: 

        node01_spine: |
            policy-map type network-qos jumbo
                class type network-qos class-default
                    mtu 9216
            system qos
            service-policy type network-qos jumbo
            
            feature bgp
            feature ospfv3
            feature pim
            feature pim6
            feature lacp
            feature lldp
            feature bfd

            ip pim ssm range 232.0.0.0/8
            no ip igmp snooping

            route-map setnh_unchanged permit 10

            interface port-channel211
            no switchport
            mtu 9216
            ipv6 address 2001:2:211:1::2/64
            ospfv3 dead-interval 4
            ospfv3 hello-interval 1
            ospfv3 network point-to-point
            ipv6 router ospfv3 vxlan area 0.0.0.0
            ip pim sparse-mode

            interface port-channel212
            no switchport
            mtu 9216
            ipv6 address 2001:2:212:1::2/64
            ospfv3 dead-interval 4
            ospfv3 hello-interval 1
            ospfv3 network point-to-point
            ipv6 router ospfv3 vxlan area 0.0.0.0
            ip pim sparse-mode

            interface port-channel213
            no switchport
            mtu 9216
            ipv6 address 2001:2:213:1::2/64
            ospfv3 dead-interval 4
            ospfv3 hello-interval 1
            ospfv3 network point-to-point
            ipv6 router ospfv3 vxlan area 0.0.0.0
            ip pim sparse-mode

            interface loopback0
            ipv6 address 4001:1::5/128
            ospfv3 dead-interval 4
            ospfv3 hello-interval 1
            ipv6 router ospfv3 vxlan area 0.0.0.0
            ip pim sparse-mode

            router ospfv3 vxlan
            router-id 3.1.1.2
            log-adjacency-changes detail
            address-family ipv6 unicast
                maximum-paths 16
            router bgp 200
            router-id 11.11.11.11
            log-neighbor-changes
            event-history errors size large
            event-history detail size large
            address-family ipv4 unicast
            address-family ipv6 unicast
            address-family l2vpn evpn
            template peer ibgp_evpn
                log-neighbor-changes
                update-source loopback0
                address-family ipv6 unicast
                address-family l2vpn evpn
                send-community
                send-community extended
                route-reflector-client
                route-map setnh_unchanged out
            neighbor 2001:211:1::1
                inherit peer ibgp_evpn
                remote-as 200
            neighbor 2001:212:1::1
                inherit peer ibgp_evpn
                remote-as 200
            neighbor 2001:213:1::1
                inherit peer ibgp_evpn
                remote-as 200

        node02_vpcVtep1: |
            
            feature ngmvpn
            nv overlay evpn
            feature ospf
            feature bgp
            feature ospfv3
            feature pim
            feature fabric forwarding
            feature interface-vlan
            feature vn-segment-vlan-based
            feature lacp
            feature vpc
            feature nv overlay

            fabric forwarding anycast-gateway-mac 0000.000a.aaaa
            ip pim rp-address 11.11.11.11 group-list 224.0.0.0/4
            ip pim ssm range 232.0.0.0/8
            vlan 1-2,10-12,1001-1008
            vlan 10
            vn-segment 10000
            vlan 11
            vn-segment 11000
            vlan 12
            vn-segment 12000
            vlan 1001
            vn-segment 20001
            vlan 1002
            vn-segment 20002
            vlan 1003
            vn-segment 20003
            vlan 1004
            vn-segment 20004
            vlan 1005
            vn-segment 20005
            vlan 1006
            vn-segment 20006
            vlan 1007
            vn-segment 20007
            vlan 1008
            vn-segment 20008

            route-map ANY permit 10

            vrf context EVPN-VRF-1
            vni 10000
            ip pim ssm range 232.0.0.0/8
            rd auto
            address-family ipv4 unicast
                route-target both auto
                route-target both auto evpn
                export map ANY
            address-family ipv6 unicast
                route-target both auto
                route-target both auto evpn
                export map ANY
            vrf context EVPN-VRF-2
            vni 11000
            ip pim ssm range 232.0.0.0/8
            rd auto
            address-family ipv4 unicast
                route-target both auto
                route-target both auto evpn
                export map ANY
            address-family ipv6 unicast
                route-target both auto
                route-target both auto evpn
                export map ANY
            vrf context EVPN-VRF-3
            vni 12000
            ip pim ssm range 232.0.0.0/8
            rd auto
            address-family ipv4 unicast
                route-target both auto
                route-target both auto evpn
                export map ANY
            address-family ipv6 unicast
                route-target both auto
                route-target both auto evpn
                export map ANY

            vrf context keep_alive
            system nve infra-vlans 5
            system dot1q-tunnel transit vlan 1001-1005
            vpc domain 100
                peer-switch
                role priority 3000
                system-priority 3000
                peer-keepalive destination 5.5.5.10 source 5.5.5.5 vrf keep_alive
                peer-gateway
                layer3 peer-router
                ipv6 nd synchronize
                ip arp synchronize



            interface Vlan2
                description special_svi_over_peer-link
                no shutdown
                no ip redirects
                ip address 30.2.1.1/30
                no ipv6 redirects
                ip ospf network point-to-point
                ip router ospf 100 area 0.0.0.0
                ip pim sparse-mode

            interface Vlan10
                no shutdown
                vrf member EVPN-VRF-1
                no ip redirects
                ip forward
                ipv6 address use-link-local-only
                no ipv6 redirects
                ip pim sparse-mode

            interface Vlan11
                no shutdown
                vrf member EVPN-VRF-2
                no ip redirects
                ip forward
                ipv6 address use-link-local-only
                no ipv6 redirects
                ip pim sparse-mode

            interface Vlan12
                no shutdown
                vrf member EVPN-VRF-3
                no ip redirects
                ip forward
                ipv6 address use-link-local-only
                no ipv6 redirects
                ip pim sparse-mode

            interface Vlan1001
                no shutdown
                vrf member EVPN-VRF-1
                no ip redirects
                ip address 2.1.1.1/24
                ipv6 address 2001:2:1:1::1/64
                no ipv6 redirects
                fabric forwarding mode anycast-gateway

            interface Vlan1002
                no shutdown
                vrf member EVPN-VRF-1
                no ip redirects
                ip address 2.1.2.1/24
                ipv6 address 2001:2:1:2::1/64
                no ipv6 redirects
                fabric forwarding mode anycast-gateway

            interface Vlan1003
                no shutdown
                vrf member EVPN-VRF-2
                no ip redirects
                ip address 2.1.3.1/24
                ipv6 address 2001:2:1:3::1/64
                no ipv6 redirects
                fabric forwarding mode anycast-gateway

            interface Vlan1004
                no shutdown
                vrf member EVPN-VRF-2
                no ip redirects
                ip address 2.1.4.1/24
                ipv6 address 2001:2:1:4::1/64
                no ipv6 redirects
                fabric forwarding mode anycast-gateway

            interface Vlan1005
                no shutdown
                vrf member EVPN-VRF-2
                no ip redirects
                ip address 2.1.5.1/24
                ipv6 address 2001:2:1:5::1/64
                no ipv6 redirects
                fabric forwarding mode anycast-gateway

            interface Vlan1006
                no shutdown
                vrf member EVPN-VRF-3
                no ip redirects
                ip address 2.1.6.1/24
                ipv6 address 2001:2:1:6::1/64
                no ipv6 redirects
                fabric forwarding mode anycast-gateway

            interface Vlan1007
                no shutdown
                vrf member EVPN-VRF-3
                no ip redirects
                ip address 2.1.7.1/24
                ipv6 address 2001:2:1:7::1/64
                no ipv6 redirects
                fabric forwarding mode anycast-gateway

            interface Vlan1008
                no shutdown
                vrf member EVPN-VRF-3
                no ip redirects
                ip address 2.1.8.1/24
                ipv6 address 2001:2:1:8::1/64
                no ipv6 redirects
                fabric forwarding mode anycast-gateway

            interface port-channel100
                switchport
                switchport mode trunk
                spanning-tree port type network
                vpc peer-link

            interface port-channel200
                switchport
                switchport mode trunk
                switchport vlan mapping 50-54 dot1q-tunnel 1001 
                switchport vlan mapping 55-59 dot1q-tunnel 1002 
                switchport vlan mapping 60-64 dot1q-tunnel 1003 
                switchport vlan mapping 65-69 dot1q-tunnel 1004 
                switchport vlan mapping 70-74 dot1q-tunnel 1005 
                switchport trunk allowed vlan 1001-1008
                spanning-tree bpdufilter enable
                vpc 200

            interface port-channel211
                mtu 9216
                ipv6 address 2001:2:211:1::3/64
                ospfv3 dead-interval 4
                ospfv3 hello-interval 1
                ospfv3 network point-to-point
                ipv6 router ospfv3 vxlan area 0.0.0.0
                ip pim sparse-mode

            interface nve1
                no shutdown
                host-reachability protocol bgp
                advertise virtual-rmac
                source-interface loopback1 anycast loopback2
                member vni 10000 associate-vrf
                member vni 11000 associate-vrf
                member vni 12000 associate-vrf
                member vni 20001-20008
                    ingress-replication protocol bgp

            interface loopback0
            ipv6 address 2001:211:1::1/128
            ospfv3 dead-interval 4
            ospfv3 hello-interval 1
            ipv6 router ospfv3 vxlan area 0.0.0.0
            ip pim sparse-mode

            interface loopback1
            ipv6 address 3001:1:1::1/128
            ospfv3 dead-interval 4
            ospfv3 hello-interval 1
            ipv6 router ospfv3 vxlan area 0.0.0.0

            interface loopback2
            ipv6 address 2001:1:1::1/128
            ospfv3 dead-interval 4
            ospfv3 hello-interval 1
            ipv6 router ospfv3 vxlan area 0.0.0.0

            router ospfv3 vxlan
            router-id 2.1.1.1
            log-adjacency-changes detail
            address-family ipv6 unicast
            
            router bgp 200
            router-id 2.211.1.1
            address-family ipv4 unicast
            address-family ipv6 unicast
            address-family l2vpn evpn
                advertise-pip
            template peer ibgp_evpn
                log-neighbor-changes
                update-source loopback0
                address-family ipv6 unicast
                send-community
                send-community extended
                address-family l2vpn evpn
                send-community
                send-community extended
            neighbor 4001:1::5
                inherit peer ibgp_evpn
                remote-as 200
            vrf EVPN-VRF-1
                address-family ipv4 unicast
                advertise l2vpn evpn
                wait-igp-convergence
                redistribute direct route-map ANY
                address-family ipv6 unicast
                advertise l2vpn evpn
                wait-igp-convergence
                redistribute direct route-map ANY
            vrf EVPN-VRF-2
                address-family ipv4 unicast
                advertise l2vpn evpn
                wait-igp-convergence
                redistribute direct route-map ANY
                address-family ipv6 unicast
                advertise l2vpn evpn
                wait-igp-convergence
                redistribute direct route-map ANY
            vrf EVPN-VRF-3
                address-family ipv4 unicast
                advertise l2vpn evpn
                wait-igp-convergence
                redistribute direct route-map ANY
                address-family ipv6 unicast
                advertise l2vpn evpn
                wait-igp-convergence
                redistribute direct route-map ANY
            evpn
            vni 20001 l2
                rd auto
                route-target import auto
                route-target export auto
            vni 20002 l2
                rd auto
                route-target import auto
                route-target export auto
            vni 20003 l2
                rd auto
                route-target import auto
                route-target export auto
            vni 20004 l2
                rd auto
                route-target import auto
                route-target export auto
            vni 20005 l2
                rd auto
                route-target import auto
                route-target export auto
            vni 20006 l2
                rd auto
                route-target import auto
                route-target export auto
            vni 20007 l2
                rd auto
                route-target import auto
                route-target export auto
            vni 20008 l2
                rd auto
                route-target import auto
                route-target export auto
            interface Ethernet1/48
                switchport
                switchport mode trunk
                switchport vlan mapping 50-54 dot1q-tunnel 1001 
                switchport vlan mapping 55-59 dot1q-tunnel 1002 
                switchport vlan mapping 60-64 dot1q-tunnel 1003 
                switchport vlan mapping 65-69 dot1q-tunnel 1004 
                switchport vlan mapping 70-74 dot1q-tunnel 1005 
                switchport trunk allowed vlan 1001-1008
                spanning-tree bpdufilter enable
                no shutdown    
            monitor session 1 
            source interface port-channel211 tx
            destination interface sup-eth0
            no shut

        node03_vpcVtep2: |
            
            nv overlay evpn
            feature ospf
            feature bgp
            feature ospfv3
            feature pim
            feature fabric forwarding
            feature interface-vlan
            feature vn-segment-vlan-based
            feature lacp
            feature vpc
            feature nv overlay

            fabric forwarding anycast-gateway-mac 0000.000a.aaaa
            ip pim rp-address 11.11.11.11 group-list 224.0.0.0/4
            ip pim ssm range 232.0.0.0/8
            vlan 1-2,10-12,1001-1008
            vlan 10
            vn-segment 10000
            vlan 11
            vn-segment 11000
            vlan 12
            vn-segment 12000
            vlan 1001
            vn-segment 20001
            vlan 1002
            vn-segment 20002
            vlan 1003
            vn-segment 20003
            vlan 1004
            vn-segment 20004
            vlan 1005
            vn-segment 20005
            vlan 1006
            vn-segment 20006
            vlan 1007
            vn-segment 20007
            vlan 1008
            vn-segment 20008

            route-map ANY permit 10

            vrf context EVPN-VRF-1
            vni 10000
            ip pim ssm range 232.0.0.0/8
            rd auto
            address-family ipv4 unicast
                route-target both auto
                route-target both auto evpn
                export map ANY
            address-family ipv6 unicast
                route-target both auto
                route-target both auto evpn
                export map ANY
            vrf context EVPN-VRF-2
            vni 11000
            ip pim ssm range 232.0.0.0/8
            rd auto
            address-family ipv4 unicast
                route-target both auto
                route-target both auto evpn
                export map ANY
            address-family ipv6 unicast
                route-target both auto
                route-target both auto evpn
                export map ANY
            vrf context EVPN-VRF-3
            vni 12000
            ip pim ssm range 232.0.0.0/8
            rd auto
            address-family ipv4 unicast
                route-target both auto
                route-target both auto evpn
                export map ANY
            address-family ipv6 unicast
                route-target both auto
                route-target both auto evpn
                export map ANY

            vrf context keep_alive
            system nve infra-vlans 5
            system dot1q-tunnel transit vlan 1001-1005
            vpc domain 100
            peer-switch
            role priority 3001
            system-priority 3000
            peer-keepalive destination 5.5.5.5 source 5.5.5.10 vrf keep_alive
            peer-gateway
            layer3 peer-router
            ipv6 nd synchronize
            ip arp synchronize


            interface Vlan2
            description special_svi_over_peer-link
            no shutdown
            no ip redirects
            ip address 30.2.1.2/30
            no ipv6 redirects
            ip ospf network point-to-point
            ip router ospf 100 area 0.0.0.0
            ip pim sparse-mode

            interface Vlan10
            no shutdown
            vrf member EVPN-VRF-1
            no ip redirects
            ip forward
            ipv6 address use-link-local-only
            no ipv6 redirects
            ip pim sparse-mode

            interface Vlan11
            no shutdown
            vrf member EVPN-VRF-2
            no ip redirects
            ip forward
            ipv6 address use-link-local-only
            no ipv6 redirects
            ip pim sparse-mode

            interface Vlan12
            no shutdown
            vrf member EVPN-VRF-3
            no ip redirects
            ip forward
            ipv6 address use-link-local-only
            no ipv6 redirects
            ip pim sparse-mode

            interface Vlan1001
            no shutdown
            vrf member EVPN-VRF-1
            no ip redirects
            ip address 2.1.1.1/24
            ipv6 address 2001:2:1:1::1/64
            no ipv6 redirects
            fabric forwarding mode anycast-gateway

            interface Vlan1002
            no shutdown
            vrf member EVPN-VRF-1
            no ip redirects
            ip address 2.1.2.1/24
            ipv6 address 2001:2:1:2::1/64
            no ipv6 redirects
            fabric forwarding mode anycast-gateway

            interface Vlan1003
            no shutdown
            vrf member EVPN-VRF-2
            no ip redirects
            ip address 2.1.3.1/24
            ipv6 address 2001:2:1:3::1/64
            no ipv6 redirects
            fabric forwarding mode anycast-gateway

            interface Vlan1004
            no shutdown
            vrf member EVPN-VRF-2
            no ip redirects
            ip address 2.1.4.1/24
            ipv6 address 2001:2:1:4::1/64
            no ipv6 redirects
            fabric forwarding mode anycast-gateway

            interface Vlan1005
            no shutdown
            vrf member EVPN-VRF-2
            no ip redirects
            ip address 2.1.5.1/24
            ipv6 address 2001:2:1:5::1/64
            no ipv6 redirects
            fabric forwarding mode anycast-gateway

            interface Vlan1006
            no shutdown
            vrf member EVPN-VRF-3
            no ip redirects
            ip address 2.1.6.1/24
            ipv6 address 2001:2:1:6::1/64
            no ipv6 redirects
            fabric forwarding mode anycast-gateway

            interface Vlan1007
            no shutdown
            vrf member EVPN-VRF-3
            no ip redirects
            ip address 2.1.7.1/24
            ipv6 address 2001:2:1:7::1/64
            no ipv6 redirects
            fabric forwarding mode anycast-gateway

            interface Vlan1008
            no shutdown
            vrf member EVPN-VRF-3
            no ip redirects
            ip address 2.1.8.1/24
            ipv6 address 2001:2:1:8::1/64
            no ipv6 redirects
            fabric forwarding mode anycast-gateway

            interface port-channel100
            switchport
            switchport mode trunk
            spanning-tree port type network
            vpc peer-link

            interface port-channel200
            switchport
            switchport mode trunk
            switchport vlan mapping 50-54 dot1q-tunnel 1001 
            switchport vlan mapping 55-59 dot1q-tunnel 1002 
            switchport vlan mapping 60-64 dot1q-tunnel 1003 
            switchport vlan mapping 65-69 dot1q-tunnel 1004 
            switchport vlan mapping 70-74 dot1q-tunnel 1005 
            switchport trunk allowed vlan 1001-1008
            spanning-tree bpdufilter enable
            vpc 200

            interface port-channel212
            mtu 9216
            ipv6 address 2001:2:212:1::3/64
            ospfv3 dead-interval 4
            ospfv3 hello-interval 1
            ospfv3 network point-to-point
            ipv6 router ospfv3 vxlan area 0.0.0.0
            ip pim sparse-mode

            interface nve1
            no shutdown
            host-reachability protocol bgp
            advertise virtual-rmac
            source-interface loopback1 anycast loopback2
            member vni 10000 associate-vrf
            member vni 11000 associate-vrf
            member vni 12000 associate-vrf
            member vni 20001-20008
                ingress-replication protocol bgp

            interface Ethernet1/48
            switchport
            switchport mode trunk
            switchport vlan mapping 50-54 dot1q-tunnel 1001 
            switchport vlan mapping 55-59 dot1q-tunnel 1002 
            switchport vlan mapping 60-64 dot1q-tunnel 1003 
            switchport vlan mapping 65-69 dot1q-tunnel 1004 
            switchport vlan mapping 70-74 dot1q-tunnel 1005 
            switchport trunk allowed vlan 1001-1008
            spanning-tree bpdufilter enable
            no shutdown


            interface loopback0
            ipv6 address 2001:212:1::1/128
            ospfv3 dead-interval 4
            ospfv3 hello-interval 1
            ipv6 router ospfv3 vxlan area 0.0.0.0
            ip pim sparse-mode

            interface loopback1
            ipv6 address 3001:1:1::2/128
            ospfv3 dead-interval 4
            ospfv3 hello-interval 1
            ipv6 router ospfv3 vxlan area 0.0.0.0

            interface loopback2
            ipv6 address 2001:1:1::1/128
            ospfv3 dead-interval 4
            ospfv3 hello-interval 1
            ipv6 router ospfv3 vxlan area 0.0.0.0

            router ospfv3 vxlan
            router-id 2.212.1.1
            log-adjacency-changes detail
            address-family ipv6 unicast
            router bgp 200
            router-id 2.212.1.1
            address-family ipv4 unicast
            address-family ipv6 unicast
            address-family l2vpn evpn
                advertise-pip
            template peer ibgp_evpn
                log-neighbor-changes
                update-source loopback0
                address-family ipv6 unicast
                send-community
                send-community extended
                address-family l2vpn evpn
                send-community
                send-community extended
            neighbor 4001:1::5
                inherit peer ibgp_evpn
                remote-as 200
            vrf EVPN-VRF-1
                address-family ipv4 unicast
                advertise l2vpn evpn
                wait-igp-convergence
                redistribute direct route-map ANY
                address-family ipv6 unicast
                advertise l2vpn evpn
                wait-igp-convergence
                redistribute direct route-map ANY
            vrf EVPN-VRF-2
                address-family ipv4 unicast
                advertise l2vpn evpn
                wait-igp-convergence
                redistribute direct route-map ANY
                address-family ipv6 unicast
                advertise l2vpn evpn
                wait-igp-convergence
                redistribute direct route-map ANY
            vrf EVPN-VRF-3
                address-family ipv4 unicast
                advertise l2vpn evpn
                wait-igp-convergence
                redistribute direct route-map ANY
                address-family ipv6 unicast
                advertise l2vpn evpn
                wait-igp-convergence
                redistribute direct route-map ANY
            evpn
            vni 20001 l2
                rd auto
                route-target import auto
                route-target export auto
            vni 20002 l2
                rd auto
                route-target import auto
                route-target export auto
            vni 20003 l2
                rd auto
                route-target import auto
                route-target export auto
            vni 20004 l2
                rd auto
                route-target import auto
                route-target export auto
            vni 20005 l2
                rd auto
                route-target import auto
                route-target export auto
            vni 20006 l2
                rd auto
                route-target import auto
                route-target export auto
            vni 20007 l2
                rd auto
                route-target import auto
                route-target export auto
            vni 20008 l2
                rd auto
                route-target import auto
                route-target export auto
            monitor session 1 
            source interface port-channel212 tx
            destination interface sup-eth0
            no shut
           
        node04_stdVtep3: |
            
            nv overlay evpn
            feature ospf
            feature bgp
            feature ospfv3
            feature pim
            feature fabric forwarding
            feature interface-vlan
            feature vn-segment-vlan-based
            feature lacp
            feature nv overlay

            fabric forwarding anycast-gateway-mac 0000.000a.aaaa
            ip pim rp-address 11.11.11.11 group-list 224.0.0.0/4
            ip pim ssm range 232.0.0.0/8
            vlan 1,10-12,1001-1008
            vlan 10
            vn-segment 10000
            vlan 11
            vn-segment 11000
            vlan 12
            vn-segment 12000
            vlan 1001
            vn-segment 20001
            vlan 1002
            vn-segment 20002
            vlan 1003
            vn-segment 20003
            vlan 1004
            vn-segment 20004
            vlan 1005
            vn-segment 20005
            vlan 1006
            vn-segment 20006
            vlan 1007
            vn-segment 20007
            vlan 1008
            vn-segment 20008

            route-map ANY permit 10
            vrf context EVPN-VRF-1
            vni 10000
            ip pim ssm range 232.0.0.0/8
            rd auto
            address-family ipv4 unicast
                route-target both auto
                route-target both auto evpn
                export map ANY
            address-family ipv6 unicast
                route-target both auto
                route-target both auto evpn
                export map ANY
            vrf context EVPN-VRF-2
            vni 11000
            ip pim ssm range 232.0.0.0/8
            rd auto
            address-family ipv4 unicast
                route-target both auto
                route-target both auto evpn
                export map ANY
            address-family ipv6 unicast
                route-target both auto
                route-target both auto evpn
                export map ANY
            vrf context EVPN-VRF-3
            vni 12000
            ip pim ssm range 232.0.0.0/8
            rd auto
            address-family ipv4 unicast
                route-target both auto
                route-target both auto evpn
                export map ANY
            address-family ipv6 unicast
                route-target both auto
                route-target both auto evpn
                export map ANY

            system nve infra-vlans 5
            system dot1q-tunnel transit vlan 1001-1005




            interface Vlan10
            no shutdown
            vrf member EVPN-VRF-1
            no ip redirects
            ip forward
            ipv6 address use-link-local-only
            no ipv6 redirects
            ip pim sparse-mode

            interface Vlan11
            no shutdown
            vrf member EVPN-VRF-2
            no ip redirects
            ip forward
            ipv6 address use-link-local-only
            no ipv6 redirects
            ip pim sparse-mode

            interface Vlan12
            no shutdown
            vrf member EVPN-VRF-3
            no ip redirects
            ip forward
            ipv6 address use-link-local-only
            no ipv6 redirects
            ip pim sparse-mode

            interface Vlan1001
            no shutdown
            vrf member EVPN-VRF-1
            no ip redirects
            ip address 2.1.1.1/24
            ipv6 address 2001:2:1:1::1/64
            no ipv6 redirects
            fabric forwarding mode anycast-gateway

            interface Vlan1002
            no shutdown
            vrf member EVPN-VRF-1
            no ip redirects
            ip address 2.1.2.1/24
            ipv6 address 2001:2:1:2::1/64
            no ipv6 redirects
            fabric forwarding mode anycast-gateway

            interface Vlan1003
            no shutdown
            vrf member EVPN-VRF-2
            no ip redirects
            ip address 2.1.3.1/24
            ipv6 address 2001:2:1:3::1/64
            no ipv6 redirects
            fabric forwarding mode anycast-gateway

            interface Vlan1004
            no shutdown
            vrf member EVPN-VRF-2
            no ip redirects
            ip address 2.1.4.1/24
            ipv6 address 2001:2:1:4::1/64
            no ipv6 redirects
            fabric forwarding mode anycast-gateway

            interface Vlan1005
            no shutdown
            vrf member EVPN-VRF-2
            no ip redirects
            ip address 2.1.5.1/24
            ipv6 address 2001:2:1:5::1/64
            no ipv6 redirects
            fabric forwarding mode anycast-gateway

            interface Vlan1006
            no shutdown
            vrf member EVPN-VRF-3
            no ip redirects
            ip address 2.1.6.1/24
            ipv6 address 2001:2:1:6::1/64
            no ipv6 redirects
            fabric forwarding mode anycast-gateway

            interface Vlan1007
            no shutdown
            vrf member EVPN-VRF-3
            no ip redirects
            ip address 2.1.7.1/24
            ipv6 address 2001:2:1:7::1/64
            no ipv6 redirects
            fabric forwarding mode anycast-gateway

            interface Vlan1008
            no shutdown
            vrf member EVPN-VRF-3
            no ip redirects
            ip address 2.1.8.1/24
            ipv6 address 2001:2:1:8::1/64
            no ipv6 redirects
            fabric forwarding mode anycast-gateway

            interface port-channel213
            mtu 9216
            ipv6 address 2001:2:213:1::3/64
            ospfv3 dead-interval 4
            ospfv3 hello-interval 1
            ospfv3 network point-to-point
            ipv6 router ospfv3 vxlan area 0.0.0.0
            ip pim sparse-mode

            interface nve1
            no shutdown
            host-reachability protocol bgp
            advertise virtual-rmac
            source-interface loopback1
            member vni 10000 associate-vrf
            member vni 11000 associate-vrf
            member vni 12000 associate-vrf
            member vni 20001-20008
                ingress-replication protocol bgp

            interface Ethernet1/48
            switchport
            switchport mode trunk
            switchport vlan mapping 50-54 dot1q-tunnel 1001 
            switchport vlan mapping 55-59 dot1q-tunnel 1002 
            switchport vlan mapping 60-64 dot1q-tunnel 1003 
            switchport vlan mapping 65-69 dot1q-tunnel 1004 
            switchport vlan mapping 70-74 dot1q-tunnel 1005 
            switchport trunk allowed vlan 1001-1008
            spanning-tree bpdufilter enable
            no shutdown

            interface loopback0
            ipv6 address 2001:213:1::1/128
            ospfv3 dead-interval 4
            ospfv3 hello-interval 1
            ipv6 router ospfv3 vxlan area 0.0.0.0
            ip pim sparse-mode

            interface loopback1
            ipv6 address 3001:1:1::3/128
            ospfv3 dead-interval 4
            ospfv3 hello-interval 1
            ipv6 router ospfv3 vxlan area 0.0.0.0

            router ospfv3 vxlan
            router-id 2.213.1.1
            log-adjacency-changes detail
            address-family ipv6 unicast
                maximum-paths 16
                
            router bgp 200
            router-id 2.213.1.1
            address-family ipv4 unicast
            address-family ipv6 unicast
            address-family l2vpn evpn
            template peer ibgp_evpn
                log-neighbor-changes
                update-source loopback0
                address-family l2vpn evpn
                send-community
                send-community extended
            neighbor 4001:1::5
                inherit peer ibgp_evpn
                remote-as 200
                address-family l2vpn evpn
                send-community
                send-community extended
            vrf EVPN-VRF-1
                address-family ipv4 unicast
                advertise l2vpn evpn
                wait-igp-convergence
                redistribute direct route-map ANY
                address-family ipv6 unicast
                advertise l2vpn evpn
                wait-igp-convergence
                redistribute direct route-map ANY
            vrf EVPN-VRF-2
                address-family ipv4 unicast
                advertise l2vpn evpn
                wait-igp-convergence
                redistribute direct route-map ANY
                address-family ipv6 unicast
                advertise l2vpn evpn
                wait-igp-convergence
                redistribute direct route-map ANY
            vrf EVPN-VRF-3
                address-family ipv4 unicast
                advertise l2vpn evpn
                wait-igp-convergence
                redistribute direct route-map ANY
                address-family ipv6 unicast
                advertise l2vpn evpn
                wait-igp-convergence
                redistribute direct route-map ANY
            evpn
            vni 20001 l2
                rd auto
                route-target import auto
                route-target export auto
            vni 20002 l2
                rd auto
                route-target import auto
                route-target export auto
            vni 20003 l2
                rd auto
                route-target import auto
                route-target export auto
            vni 20004 l2
                rd auto
                route-target import auto
                route-target export auto
            vni 20005 l2
                rd auto
                route-target import auto
                route-target export auto
            vni 20006 l2
                rd auto
                route-target import auto
                route-target export auto
            vni 20007 l2
                rd auto
                route-target import auto
                route-target export auto
            vni 20008 l2
                rd auto
                route-target import auto
                route-target export auto
            monitor session 1 
            source interface port-channel213 both
            destination interface sup-eth0
            no shut
            
        node05_vpcFANOUT:
            vlan 1,50-74,1001-1008
    

    # ------------------------------------------------------
    # Features to be disabled as part of cleanup
    # ------------------------------------------------------
    disable_features:
        # SPINE
        node01_spine:
            - lldp
            - lacp
            - ospfv3
            - pim4
            - bgp
            - vxlan
        # VPC VTEP-1
        node02_vpcVtep1:
            - lldp
            - vlan
            - vpc
            - lacp
            - ospfv3
            - pim4
            - bgp
            - vxlan
        # VPC VTEP-2
        node03_vpcVtep2:
            - lldp
            - vlan
            - vpc
            - lacp
            - ospfv3
            - pim4
            - bgp
            - vxlan
        # STD VTEP-3
        node04_stdVtep3:
            - lldp
            - vlan
            - lacp
            - ospfv3
            - pim4
            - bgp
            - vxlan
        # VPC ACCESS
        node05_vpcFANOUT:
            - lldp
            - vlan
            - lacp
    
    # ------------------------------------------------------
    # Disabling the missing (user defined) configs
    # ------------------------------------------------------
    # disable_missing_config:
        
    #     node02_vpcVtep1: |
    #         no ip igmp snooping vxlan
    #         no vrf context peer-keep-alive
    #         no vlan 2

    #     node03_vpcVtep2: |
    #         no ip igmp snooping vxlan
    #         no vrf context peer-keep-alive
    #         no vlan 2

        # node04_stdVtep3: |
        #     no ip igmp snooping vxlan
